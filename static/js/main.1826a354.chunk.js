(this["webpackJsonpjson-schema-editor"]=this["webpackJsonpjson-schema-editor"]||[]).push([[0],{299:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),i=a(17),r=a.n(i),o=(a(60),a(8)),c=a(9),s=a(11),d=a(10),u=a(314),m=a(66),h=a(310),p=a(315),f=a(313),E=a(309),g=a(20),b=a.n(g),v=a(14),y=a(312),x=a(306),C=a(65),k=a(308),O=a(316),j=a(307),F=a(68),S=a(69),M=a(54),w=l.a.forwardRef((function(e,t){switch(e.type){case H.Array:return l.a.createElement(G,Object.assign({},e,{ref:t}));case H.Boolean:return l.a.createElement(V,Object.assign({},e,{ref:t}));case H.Integer:return l.a.createElement(q,Object.assign({},e,{ref:t}));case H.Number:return l.a.createElement(B,Object.assign({},e,{ref:t}));case H.Object:return l.a.createElement(U,Object.assign({},e,{ref:t}));case H.String:return l.a.createElement(J,Object.assign({},e,{ref:t}));default:return l.a.createElement(U,Object.assign({},e,{ref:t}))}})),I=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={children:[],checkNameDuplicate:!1},n}return Object(c.a)(a,[{key:"add",value:function(e){var t,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.state.children;t=""===e?i.length-1:i.findIndex((function(t){return t.keyId===e})),i.splice(t+1,0,{delete:this.delete.bind(this),addSibling:this.add.bind(this),type:H.Object,isDeleteAble:a,hasSibling:n,keyId:b()("child_node-"),ref:l.a.createRef()}),this.setState({children:i})}},{key:"delete",value:function(e){var t=this.state.children,a=t.findIndex((function(t){return t.keyId===e}));t.splice(a,1),this.setState({children:t})}},{key:"changeType",value:function(e,t){this.setState((function(a){return{children:a.children.map((function(a){return a.keyId===e?Object(v.a)(Object(v.a)({},a),{},{type:t}):a}))}}))}},{key:"exportSchemaObj",value:function(){if(this.state.checkNameDuplicate)throw new Error("Find Duplicate");return this.state.children.map((function(e){return{name:e.ref.current.form.name,value:e.ref.current.exportSchemaObj(),required:e.ref.current.form.required}}))}},{key:"checkChildName",value:function(e,t){var a,n=!1,l=Object(M.a)(this.state.children);try{for(l.s();!(a=l.n()).done;){var i=a.value;if(i.keyId!==e&&i.ref.current.form.name===t){n=!0;break}}}catch(r){l.e(r)}finally{l.f()}this.setState({checkNameDuplicate:n})}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,this.state.checkNameDuplicate&&l.a.createElement(x.a,null,l.a.createElement(C.a,{lg:"auto",className:"px-0 mx-0",style:{width:(20*this.props.depth).toString()+"px"}}),l.a.createElement(C.a,null,l.a.createElement("span",{style:{color:"red"}},"Find duplicated field name in this layer "))),this.state.children.map((function(t,a){return l.a.createElement(w,Object.assign({key:t.keyId},t,{ref:t.ref,changeType:e.changeType.bind(e),changeName:e.checkChildName.bind(e),depth:e.props.depth}))})))}}]),a}(l.a.Component),T=a(311),_=a(16),D=a(67),N=l.a.forwardRef((function(e,t){return l.a.createElement("span",{ref:t,id:e.id,onClick:e.onClick},l.a.createElement(_.a,{color:"green"}))})),L=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).addHtmlDropId=b()("Add-Dropdown"),e.addToolTipId=b()("Add-Tooltip"),e}return Object(c.a)(a,[{key:"dropDownOnToggle",value:function(e,t,a){t&&t.stopPropagation()}},{key:"render",value:function(){return l.a.createElement("div",{className:"node-option-block"},this.props.hasChild&&this.props.hasSibling&&l.a.createElement("div",{className:"node-option-btn-block"},l.a.createElement(T.a,{onToggle:this.dropDownOnToggle.bind(this)},l.a.createElement(T.a.Toggle,{as:N,id:this.addHtmlDropId}),l.a.createElement(T.a.Menu,null,l.a.createElement(T.a.Item,{href:"#",eventKey:"1",onClick:this.props.clickAddSibling},"Add Sibling"),l.a.createElement(T.a.Item,{href:"#",eventKey:"2",onClick:this.props.clickAddChild},"Add Child")))),this.props.hasChild!==this.props.hasSibling&&l.a.createElement("div",{className:"node-option-btn-block",onClick:this.props.hasChild?this.props.clickAddChild:this.props.clickAddSibling},l.a.createElement(O.a,{trigger:["hover","focus"],overlay:l.a.createElement(j.a,{id:this.addToolTipId}," Add ")},l.a.createElement("span",null,l.a.createElement(_.a,{color:"green"})))),this.props.isDeleteAble&&l.a.createElement("div",{className:"node-option-btn-block",onClick:this.props.clickDelete},l.a.createElement(O.a,{trigger:["hover","focus"],overlay:l.a.createElement(j.a,{id:"delete-tooltip"}," Delete ")},l.a.createElement("span",null,l.a.createElement(_.b,{color:"red"})))),this.props.isOptionExist&&l.a.createElement("div",{className:"node-option-btn-block",onClick:this.props.clickOption},l.a.createElement(O.a,{trigger:["hover","focus"],overlay:l.a.createElement(j.a,{id:"option-tooltip"}," Option ")},l.a.createElement("span",null,l.a.createElement(D.a,null)))))}}]),a}(l.a.Component);class A extends l.a.Component{constructor(e){super(e),this.selfType=void 0,this.field=void 0,this.childRef=void 0,this.optionFieldFormRef=void 0,this.childRef=l.a.createRef(),this.optionFieldFormRef=l.a.createRef(),this.state=Object(v.a)({showOptionModal:!1,showDescriptionModal:!1,isDeleteAble:!0,isOptionExist:!0,hasChild:!1,hasSibling:!0},e),this.field={name:b()("field_"),required:!0},this.props.field&&(this.field=Object(v.a)(Object(v.a)({},this.field),this.props.field))}get form(){return this.field}setShowOptionModal(e){this.setState({showOptionModal:e})}setShowDescriptionEditorModal(e){this.setState({showDescriptionModal:e})}addSibling(){this.props.addSibling&&this.props.addSibling(this.props.keyId)}addChild(e=!0,t=!0){this.childRef.current.add("",e,t)}delete(){this.props.delete&&this.props.delete(this.props.keyId)}changeType(e){e.preventDefault(),e.target.value in H&&this.props.changeType(this.props.keyId,H[e.target.value])}recordGenericField(e,t){"name"===e?(this.props.changeName(this.props.keyId,t.target.value),this.field[e]=t.target.value):this.field[e]="required"===e?t.target.checked:t.target.value,"description"===e&&this.forceUpdate()}resetOptionFiledForm(){var e;for(e in this.field)"name"!==e&&"title"!==e&&"description"!==e&&"required"!==e&&delete this.field[e];this.optionFieldFormRef.current&&this.optionFieldFormRef.current.reset()}render(){return l.a.createElement("div",{className:"my-1"},l.a.createElement(y.a,null,l.a.createElement(y.a.Row,null,l.a.createElement(C.a,{lg:3},l.a.createElement(x.a,null,l.a.createElement(C.a,{lg:"auto",className:"px-0 mx-0",style:{width:(20*this.props.depth).toString()+"px"}}),l.a.createElement(C.a,null,l.a.createElement(k.a,null,l.a.createElement(O.a,{trigger:["hover","focus"],overlay:l.a.createElement(j.a,{id:"add-tooltip"}," Required ")},l.a.createElement(k.a.Prepend,null,l.a.createElement(k.a.Checkbox,{defaultChecked:this.field.required,disabled:!this.state.isDeleteAble,onChange:this.recordGenericField.bind(this,"required")}))),l.a.createElement(y.a.Control,{placeholder:"items",required:!0,readOnly:!this.state.isDeleteAble,defaultValue:this.field.name,onChange:this.recordGenericField.bind(this,"name")}))))),l.a.createElement(C.a,{lg:1},l.a.createElement(y.a.Control,{as:"select",custom:!0,placeholder:"DataType",onChange:this.changeType.bind(this),value:this.selfType},l.a.createElement("option",null,"Object"),l.a.createElement("option",null,"Array"),l.a.createElement("option",null,"String"),l.a.createElement("option",null,"Integer"),l.a.createElement("option",null,"Number"),l.a.createElement("option",null,"Boolean"))),l.a.createElement(C.a,{lg:3},l.a.createElement(y.a.Control,{placeholder:"Titile",onChange:this.recordGenericField.bind(this,"title")})),l.a.createElement(C.a,{lg:4},l.a.createElement(k.a,null,l.a.createElement(F.a,{type:"text",id:"Description",placeholder:"Description",defaultValue:this.field.description,value:this.field.description,onChange:this.recordGenericField.bind(this,"description")}),l.a.createElement(O.a,{trigger:["hover","focus"],overlay:l.a.createElement(j.a,{id:"add-tooltip"}," Edit ")},l.a.createElement(k.a.Append,null,l.a.createElement(m.a,{variant:"outline-primary",onClick:this.setShowDescriptionEditorModal.bind(this,!0)},l.a.createElement(S.a,null))))),l.a.createElement(h.a,{onHide:this.setShowDescriptionEditorModal.bind(this,!1),show:this.state.showDescriptionModal,size:"lg","aria-labelledby":"description-modal",centered:!0},l.a.createElement(h.a.Header,{closeButton:!0},l.a.createElement(h.a.Title,{id:"description-modal"},"Description")),l.a.createElement(h.a.Body,null,l.a.createElement(y.a.Group,null,l.a.createElement(y.a.Control,{as:"textarea",rows:3,defaultValue:this.field.description,onChange:this.recordGenericField.bind(this,"description")}))))),l.a.createElement(C.a,{lg:1},l.a.createElement(L,{hasChild:this.selfType!==H.Array&&this.state.hasChild,hasSibling:this.state.hasSibling,isDeleteAble:this.state.isDeleteAble,isOptionExist:this.state.isOptionExist,clickAddChild:this.addChild.bind(this),clickAddSibling:this.addSibling.bind(this),clickDelete:this.delete.bind(this),clickOption:this.setShowOptionModal.bind(this,!0)}),l.a.createElement(h.a,{onHide:this.setShowOptionModal.bind(this,!1),show:this.state.showOptionModal,size:"lg","aria-labelledby":"option-modal",centered:!0},l.a.createElement(h.a.Header,{closeButton:!0},l.a.createElement(h.a.Title,{id:"option-modal"},"Advanced Options")),l.a.createElement(h.a.Body,null,l.a.createElement(y.a,{ref:this.optionFieldFormRef},this.OptionModal())),l.a.createElement(h.a.Footer,null,l.a.createElement(m.a,{variant:"outline-secondary",onClick:this.resetOptionFiledForm.bind(this)},"Clear")))))),this.state.hasChild&&l.a.createElement(I,{ref:this.childRef,depth:this.props.depth+1}))}}var R=A,G=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,Object(v.a)(Object(v.a)({},e),{},{hasChild:!0}))).selfType=H.Array,n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.addChild(!1,!1)}},{key:"exportSchemaObj",value:function(){var e=this.childRef.current.exportSchemaObj();return!!e&&{type:"array",title:this.field.title,description:this.field.description,uniqueItems:this.field.unique,minItems:this.field.min_items,maxItems:this.field.max_items,items:e[0].value}}},{key:"recordField",value:function(e,t){this.field[e]="min_items"===e||"max_items"===e?Number(t.target.value):t.target.checked}},{key:"OptionModal",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(y.a.Group,{as:x.a},l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"MinItems"},"Min Items"),l.a.createElement(C.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",min:"0",id:"MinItems",onChange:this.recordField.bind(this,"min_items")})),l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"MaxItems"},"Max Items"),l.a.createElement(C.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",min:"0",id:"MaxItems",onChange:this.recordField.bind(this,"max_items")}))),l.a.createElement(y.a.Group,null,l.a.createElement(y.a.Check,{id:"uniqueCheckbox",type:"checkbox",label:"Unique",onChange:this.recordField.bind(this,"unique")})))}}]),a}(R),V=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).selfType=H.Boolean,e}return Object(c.a)(a,[{key:"recordField",value:function(e,t){this.field[e]="True"===t.target.value}},{key:"exportSchemaObj",value:function(){return{type:"boolean",default:this.field.default,title:this.field.title,description:this.field.description}}},{key:"OptionModal",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(y.a.Group,{as:x.a},l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"MinLength"},"Default"),l.a.createElement(C.a,{lg:"4"},l.a.createElement(y.a.Control,{as:"select",onChange:this.recordField.bind(this,"default")},l.a.createElement("option",null),l.a.createElement("option",null,"True"),l.a.createElement("option",null,"False")))))}}]),a}(R),q=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).selfType=H.Integer,e}return Object(c.a)(a,[{key:"recordField",value:function(e,t){"default"===e||"constant"===e||"min_value"===e||"max_value"===e||"multiple_of"===e?this.field[e]=Number(t.target.value):"max_exclusive"!==e&&"min_exclusive"!==e||(this.field[e]=t.target.checked)}},{key:"recordEnumField",value:function(e,t){this.field.enum[e]=parseInt(t.target.value)}},{key:"addEnum",value:function(){this.field.enum||(this.field.enum=[]),this.field.enum.push(""),this.forceUpdate()}},{key:"exportSchemaObj",value:function(){return{type:"integer",title:this.field.title,description:this.field.description,constant:this.field.constant,default:this.field.default,minimum:this.field.min_value,exclusiveMinimum:this.field.min_exclusive,maximum:this.field.max_value,exclusiveMaximum:this.field.max_exclusive,multipleOf:this.field.multiple_of,enum:this.field.enum}}},{key:"OptionModal",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(y.a.Group,{as:x.a,controlId:"MinValue"},l.a.createElement(y.a.Label,{column:!0,lg:"2"},"Min Value"),l.a.createElement(C.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",onChange:this.recordField.bind(this,"min_value")})),l.a.createElement(C.a,{lg:"6"},l.a.createElement(y.a.Check,{id:"ExclusiveMin",inline:!0,label:"Exclusive",type:"checkbox",style:{height:"100%"},onChange:this.recordField.bind(this,"min_exclusive")}))),l.a.createElement(y.a.Group,{as:x.a,controlId:"MaxValue"},l.a.createElement(y.a.Label,{column:!0,lg:"2"},"Max Value"),l.a.createElement(C.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",onChange:this.recordField.bind(this,"max_value")})),l.a.createElement(C.a,{lg:"6"},l.a.createElement(y.a.Check,{id:"ExclusiveMax",inline:!0,label:"Exclusive",type:"checkbox",style:{height:"100%"},onChange:this.recordField.bind(this,"max_exclusive")}))),l.a.createElement(y.a.Group,{as:x.a},l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"Default"},"Default"),l.a.createElement(C.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",id:"Default",onChange:this.recordField.bind(this,"default")})),l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"MultipleOf"},"Multiple Of"),l.a.createElement(C.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",id:"MultipleOf",onChange:this.recordField.bind(this,"multiple_of")}))),l.a.createElement(y.a.Group,{as:x.a},l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"Constant"},"Constant"),l.a.createElement(C.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",id:"Constant",placeholder:"Restricted Value",onChange:this.recordField.bind(this,"constant")}))),l.a.createElement(y.a.Group,null,this.field.enum?this.field.enum.map((function(t,a){return l.a.createElement(y.a.Group,{as:x.a,key:a},l.a.createElement(y.a.Label,{column:!0,lg:"2"},0===a?"Enum":""),l.a.createElement(C.a,{lg:"4"},a===e.field.enum.length-1?l.a.createElement(k.a,null,l.a.createElement(F.a,{type:"number",id:a.toString(),onChange:e.recordEnumField.bind(e,a),defaultValue:t}),l.a.createElement(k.a.Append,null,l.a.createElement(m.a,{variant:"outline-success",onClick:e.addEnum.bind(e)},l.a.createElement(_.a,null)))):l.a.createElement(F.a,{type:"number",id:a.toString(),onChange:e.recordEnumField.bind(e,a),defaultValue:t})))})):l.a.createElement(y.a.Group,{as:x.a},l.a.createElement(y.a.Label,{column:!0,lg:"2"},"Enum"),l.a.createElement(C.a,{lg:"10"},l.a.createElement(x.a,null,l.a.createElement(C.a,{lg:"12"},l.a.createElement(m.a,{variant:"outline-success",onClick:this.addEnum.bind(this)},l.a.createElement(_.a,{color:"green"}))))))))}}]),a}(R),B=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).selfType=H.Number,e}return Object(c.a)(a,[{key:"recordField",value:function(e,t){"default"===e||"constant"===e||"min_value"===e||"max_value"===e?this.field[e]=parseFloat(t.target.value):"max_exclusive"!==e&&"min_exclusive"!==e||(this.field[e]=t.target.checked)}},{key:"recordEnumField",value:function(e,t){this.field.enum[e]=parseFloat(t.target.value)}},{key:"addEnum",value:function(){this.field.enum||(this.field.enum=[]),this.field.enum.push(""),this.forceUpdate()}},{key:"exportSchemaObj",value:function(){return{type:"number",title:this.field.title,description:this.field.description,constant:this.field.constant,default:this.field.default,minimum:this.field.min_value,exclusiveMinimum:this.field.min_exclusive,maximum:this.field.max_value,exclusiveMaximum:this.field.max_exclusive,multipleOf:this.field.multiple_of,enum:this.field.enum}}},{key:"OptionModal",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(y.a.Group,{as:x.a,controlId:"MinValue"},l.a.createElement(y.a.Label,{column:!0,lg:"2"},"Min Value"),l.a.createElement(C.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",onChange:this.recordField.bind(this,"min_value")})),l.a.createElement(C.a,{lg:"6"},l.a.createElement(y.a.Check,{id:"ExclusiveMin",inline:!0,label:"Exclusive",type:"checkbox",style:{height:"100%"},onChange:this.recordField.bind(this,"min_exclusive")}))),l.a.createElement(y.a.Group,{as:x.a,controlId:"MaxValue"},l.a.createElement(y.a.Label,{column:!0,lg:"2"},"Max Value"),l.a.createElement(C.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",onChange:this.recordField.bind(this,"max_value")})),l.a.createElement(C.a,{lg:"6"},l.a.createElement(y.a.Check,{id:"ExclusiveMax",inline:!0,label:"Exclusive",type:"checkbox",style:{height:"100%"},onChange:this.recordField.bind(this,"max_exclusive")}))),l.a.createElement(y.a.Group,{as:x.a},l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"Default"},"Default"),l.a.createElement(C.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",id:"Default",onChange:this.recordField.bind(this,"default")})),l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"MultipleOf"},"Multiple Of"),l.a.createElement(C.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",id:"MultipleOf",onChange:this.recordField.bind(this,"multiple_of")}))),l.a.createElement(y.a.Group,{as:x.a},l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"Constant"},"Constant"),l.a.createElement(C.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",id:"Constant",placeholder:"Restricted Value",onChange:this.recordField.bind(this,"constant")}))),this.field.enum?this.field.enum.map((function(t,a){return l.a.createElement(y.a.Group,{as:x.a,key:a},l.a.createElement(y.a.Label,{column:!0,lg:"2"},0===a?"Enum":""),l.a.createElement(C.a,{lg:"6"},a===e.field.enum.length-1?l.a.createElement(k.a,null,l.a.createElement(F.a,{type:"number",id:a.toString(),onChange:e.recordEnumField.bind(e,a),defaultValue:t}),l.a.createElement(k.a.Append,null,l.a.createElement(m.a,{variant:"outline-success",onClick:e.addEnum.bind(e)},l.a.createElement(_.a,null)))):l.a.createElement(F.a,{type:"number",id:a.toString(),onChange:e.recordEnumField.bind(e,a),defaultValue:t})))})):l.a.createElement(y.a.Group,{as:x.a},l.a.createElement(y.a.Label,{column:!0,lg:"2"},"Enum"),l.a.createElement(C.a,{lg:"10"},l.a.createElement(x.a,null,l.a.createElement(C.a,{lg:"12"},l.a.createElement(m.a,{variant:"outline-success",onClick:this.addEnum.bind(this)},l.a.createElement(_.a,{color:"green"})))))))}}]),a}(R);var H,U=class extends R{recordField(e,t){}constructor(e){super(Object(v.a)(Object(v.a)({},e),{},{hasChild:!0,isOptionExist:!1})),this.selfType=H.Object}exportSchemaObj(){var e,t,a=null===(e=this.childRef.current)||void 0===e?void 0:e.exportSchemaObj(),n={},l=[],i=Object(M.a)(a);try{for(i.s();!(t=i.n()).done;){var r=t.value;n[r.name]=Object(v.a)({},r.value),r.required&&l.push(r.name)}}catch(o){i.e(o)}finally{i.f()}return{type:"object",title:this.field.title,description:this.field.description,properties:n,required:l}}OptionModal(){return l.a.createElement(l.a.Fragment,null)}},J=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).selfType=H.String,e}return Object(c.a)(a,[{key:"recordField",value:function(e,t){"min_length"===e||"max_length"===e?this.field[e]=Number(t.target.value):("default"===e||"constant"===e||"pattern"===e||"format"===e)&&(this.field[e]=t.target.value)}},{key:"recordEnumField",value:function(e,t){this.field.enum[e]=t.target.value}},{key:"addEnum",value:function(){this.field.enum||(this.field.enum=[]),this.field.enum.push(""),this.forceUpdate()}},{key:"exportSchemaObj",value:function(){return{type:"string",title:this.field.title,description:this.field.description,constant:this.field.constant,default:this.field.default,minLength:this.field.min_length,maxLength:this.field.max_length,format:this.field.format,pattern:this.field.pattern,enum:this.field.enum}}},{key:"OptionModal",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(y.a.Group,{as:x.a},l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"Default"},"Default"),l.a.createElement(C.a,{lg:"10"},l.a.createElement(y.a.Control,{type:"text",min:"0",id:"Default",onChange:this.recordField.bind(this,"default")}))),l.a.createElement(y.a.Group,{as:x.a},l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"MinLength"},"Min Length"),l.a.createElement(C.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",min:"0",id:"MinLength",onChange:this.recordField.bind(this,"min_length")})),l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"MaxLength"},"Max Length"),l.a.createElement(C.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",min:"0",id:"MaxLength",onChange:this.recordField.bind(this,"max_length")}))),l.a.createElement(y.a.Group,{as:x.a,controlId:"Format"},l.a.createElement(y.a.Label,{column:!0,lg:"2"},"Format"),l.a.createElement(C.a,{lg:"10"},l.a.createElement(y.a.Control,{as:"select",onChange:this.recordField.bind(this,"format")},["date-time","time","date","email","idn-email","hostname","idn-hostname","ipv4","ipv6","uri","uri-reference","iri","iri-reference","uri-template","json-pointer","relative-json-pointer","regex"].map((function(e,t){return l.a.createElement("option",{key:t},e)}))))),l.a.createElement(y.a.Group,{as:x.a,controlId:"Pattern"},l.a.createElement(y.a.Label,{column:!0,lg:"2"},"Pattern"),l.a.createElement(C.a,{lg:"10"},l.a.createElement(y.a.Control,{type:"text",placeholder:"Regular Expression",onChange:this.recordField.bind(this,"pattern")}))),l.a.createElement(y.a.Group,{as:x.a,controlId:"Constant"},l.a.createElement(y.a.Label,{column:!0,lg:"2"},"Constant"),l.a.createElement(C.a,{lg:"10"},l.a.createElement(y.a.Control,{type:"text",placeholder:"Restricted Value",onChange:this.recordField.bind(this,"constant")}))),this.field.enum?this.field.enum.map((function(t,a){return l.a.createElement(y.a.Group,{as:x.a,key:a},l.a.createElement(y.a.Label,{column:!0,lg:"2"},0===a?"Enum":""),l.a.createElement(C.a,{lg:"10"},a===e.field.enum.length-1?l.a.createElement(k.a,null,l.a.createElement(F.a,{type:"text",id:a.toString(),onChange:e.recordEnumField.bind(e,a),defaultValue:t}),l.a.createElement(k.a.Append,null,l.a.createElement(m.a,{variant:"outline-success",onClick:e.addEnum.bind(e)},l.a.createElement(_.a,null)))):l.a.createElement(F.a,{type:"text",id:a.toString(),onChange:e.recordEnumField.bind(e,a),defaultValue:t})))})):l.a.createElement(y.a.Group,{as:x.a},l.a.createElement(y.a.Label,{column:!0,lg:"2"},"Enum"),l.a.createElement(C.a,{lg:"10"},l.a.createElement(x.a,null,l.a.createElement(C.a,{lg:"12"},l.a.createElement(m.a,{variant:"outline-success",onClick:this.addEnum.bind(this)},l.a.createElement(_.a,{color:"green"})))))))}}]),a}(R);!function(e){e.Array="Array",e.Boolean="Boolean",e.Integer="Integer",e.Number="Number",e.Object="Object",e.String="String"}(H||(H={}));var P=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).selfType=void 0,n.nodeRef=void 0,n.selfType=H.Object,n.nodeRef=l.a.createRef(),n}return Object(c.a)(a,[{key:"changeType",value:function(e,t){this.selfType=t,this.forceUpdate()}},{key:"exportSchemaObj",value:function(){return this.nodeRef.current.exportSchemaObj()}},{key:"render",value:function(){return l.a.createElement(w,{ref:this.nodeRef,key:b()("childId"),keyId:b()("childId"),depth:0,type:this.selfType,isDeleteAble:!1,hasSibling:!1,field:{name:"root",required:!0},changeType:this.changeType.bind(this),changeName:function(){return!0}})}}]),a}(l.a.Component),W=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).rootNode=void 0,n.rootNodeRef=void 0,n.rootNodeRef=l.a.createRef(),n.rootNode=l.a.createElement(P,{ref:n.rootNodeRef}),n.state={showExport:!1,showImport:!1,showErrorToast:!1,exportString:""},n}return Object(c.a)(a,[{key:"toggleImport",value:function(e){this.setState({showImport:e})}},{key:"toggleExport",value:function(e){if(e)try{var t=this.rootNodeRef.current.exportSchemaObj();this.setState({exportString:JSON.stringify(t,null,4),showExport:!0})}catch(a){this.setState({showErrorToast:!0})}else this.setState({showExport:!1})}},{key:"saveSchema",value:function(){var e=new Blob([this.state.exportString],{type:"application/json"}),t=window.URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.setAttribute("download","Schema.json"),document.body.appendChild(a),a.click(),document.body.removeChild(a)}},{key:"render",value:function(){return l.a.createElement("div",{className:"my-3 mx-4 "},l.a.createElement(m.a,{variant:"outline-primary",onClick:this.toggleImport.bind(this,!0)},"Import from file")," "," ",l.a.createElement(m.a,{variant:"outline-success",onClick:this.toggleExport.bind(this,!0)},"Export Schema"),l.a.createElement("div",null,this.rootNode),l.a.createElement(h.a,{size:"xl",scrollable:!0,show:this.state.showExport,onHide:this.toggleExport.bind(this,!1)},l.a.createElement(h.a.Header,{closeButton:!0},l.a.createElement(h.a.Title,null,"Export")),l.a.createElement(h.a.Body,null,l.a.createElement("div",{style:{maxHeight:"80%"}},l.a.createElement(f.a,{language:"json",style:E.a,showLineNumbers:!0},this.state.exportString))),l.a.createElement(h.a.Footer,null,l.a.createElement(m.a,{variant:"outline-success",onClick:this.saveSchema.bind(this)},"Save"))),l.a.createElement(p.a,{show:this.state.showErrorToast,delay:3e3,autohide:!0,style:{position:"absolute",bottom:"20px",right:"20px"}},l.a.createElement(p.a.Header,null,l.a.createElement("strong",{className:"mr-auto"},"Error")),l.a.createElement(p.a.Body,null,"There's still some errors in your schema!",l.a.createElement("br",null)," Please check and try again!")))}}]),a}(l.a.Component),z=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(u.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},l.a.createElement(u.a.Brand,{href:""},"JSON Schema Editor"),l.a.createElement(u.a.Collapse,{className:"justify-content-end"},l.a.createElement(u.a.Text,null,l.a.createElement("a",{href:"https://github.com/JingWangTW/json-schema-editor",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("img",{height:"30px",src:"https://github.com/fluidicon.png",alt:"Github ICON"}))))),l.a.createElement(W,null))}}]),a}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e,t,a){},74:function(e,t,a){e.exports=a(299)}},[[74,1,2]]]);
//# sourceMappingURL=main.1826a354.chunk.js.map