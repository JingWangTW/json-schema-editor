(this["webpackJsonpjson-schema-editor"]=this["webpackJsonpjson-schema-editor"]||[]).push([[0],{332:function(e,t,a){"use strict";a.r(t);var i=a(1),l=a.n(i),r=a(13),n=a.n(r),s=(a(60),a(347)),o=a(58),c=a.n(o),d=a(71),m=a(76),h=a(343),u=a(348),p=a(346),E=a(72),g=a.n(E),f=a(73),b=a(74),v=a(342),x=a(17),F=a.n(x),C=a(7),y=a(345),O=a(339),k=a(75),M=a(341),S=a(349),j=a(340),I=a(78),R=a(79),w=a(51),L=l.a.forwardRef((e,t)=>{switch(e.type){case $.Array:return l.a.createElement(U,Object.assign({},Object(C.a)(Object(C.a)({},e),{},{field:e.field}),{ref:t}));case $.Boolean:return l.a.createElement(J,Object.assign({},Object(C.a)(Object(C.a)({},e),{},{field:e.field}),{ref:t}));case $.Integer:return l.a.createElement(W,Object.assign({},Object(C.a)(Object(C.a)({},e),{},{field:e.field}),{ref:t}));case $.Number:return l.a.createElement(z,Object.assign({},Object(C.a)(Object(C.a)({},e),{},{field:e.field}),{ref:t}));case $.Null:return l.a.createElement(_,Object.assign({},Object(C.a)(Object(C.a)({},e),{},{field:e.field}),{ref:t}));case $.Object:return l.a.createElement(K,Object.assign({},Object(C.a)(Object(C.a)({},e),{},{field:e.field}),{ref:t}));case $.String:return l.a.createElement(Q,Object.assign({},Object(C.a)(Object(C.a)({},e),{},{field:e.field}),{ref:t}));default:return l.a.createElement(K,Object.assign({},Object(C.a)(Object(C.a)({},e),{},{field:e.field}),{ref:t}))}});class D extends l.a.Component{constructor(e){super(e),this.state={children:[]}}get length(){return this.state.children.length}add(e,t){var a,i=this.state.children,r={isDeleteAble:!0,hasSibling:!0,requiredReadOnly:!1};t&&(r=Object(C.a)(Object(C.a)({},r),t)),a=""===e?i.length-1:i.findIndex(t=>t.keyId===e),i.splice(a+1,0,{delete:this.delete.bind(this),addSibling:this.add.bind(this),type:$.Object,isDeleteAble:r.isDeleteAble,hasSibling:r.hasSibling,requiredReadOnly:r.requiredReadOnly,keyId:F()("child_node-"),ref:l.a.createRef()}),this.setState({children:i})}delete(e){var t=this.state.children,a=t.findIndex(t=>t.keyId===e);t.splice(a,1),this.setState({children:t})}changeType(e,t){this.setState(a=>({children:a.children.map(a=>a.keyId===e?Object(C.a)(Object(C.a)({},a),{},{type:t}):a)}))}exportSchemaObj(){if(this.state.error)throw new Error("Find Error");return this.state.children.map(e=>({name:e.ref.current.form.name,value:e.ref.current.exportSchemaObj(),required:e.ref.current.form.required}))}checkChildName(e,t){var a,i=!1,l=Object(w.a)(this.state.children);try{for(l.s();!(a=l.n()).done;){var r=a.value;if(r.keyId!==e&&r.ref.current.form.name===t){i=!0;break}}}catch(n){l.e(n)}finally{l.f()}i?this.setState({error:"Find duplicated field name in this layer."}):this.setState({error:void 0})}render(){return l.a.createElement(l.a.Fragment,null,this.state.error&&l.a.createElement(O.a,null,l.a.createElement(k.a,{lg:"auto",className:"px-0 mx-0",style:{width:(20*this.props.depth).toString()+"px"}}),l.a.createElement(k.a,null,l.a.createElement("span",{style:{color:"red"}},this.state.error," "))),this.state.children.map((e,t)=>l.a.createElement(L,Object.assign({key:e.keyId},e,{ref:e.ref,changeType:this.changeType.bind(this),changeName:this.checkChildName.bind(this),depth:this.props.depth}))))}}var T=D,N=a(344),q=a(12),G=a(77),A=l.a.forwardRef((e,t)=>l.a.createElement("span",{ref:t,id:e.id,onClick:e.onClick},l.a.createElement(q.a,{color:"green"})));class P extends l.a.Component{constructor(...e){super(...e),this.addHtmlDropId=F()("Add-Dropdown"),this.addToolTipId=F()("Add-Tooltip")}dropDownOnToggle(e,t,a){t&&t.stopPropagation()}render(){return l.a.createElement("div",{className:"node-option-block"},this.props.hasChild&&this.props.hasSibling&&l.a.createElement("div",{className:"node-option-btn-block"},l.a.createElement(N.a,{onToggle:this.dropDownOnToggle.bind(this)},l.a.createElement(N.a.Toggle,{as:A,id:this.addHtmlDropId}),l.a.createElement(N.a.Menu,null,l.a.createElement(N.a.Item,{href:"#",eventKey:"1",onClick:this.props.clickAddSibling},"Add Sibling"),l.a.createElement(N.a.Item,{href:"#",eventKey:"2",onClick:this.props.clickAddChild},"Add Child")))),this.props.hasChild!==this.props.hasSibling&&l.a.createElement("div",{className:"node-option-btn-block",onClick:this.props.hasChild?this.props.clickAddChild:this.props.clickAddSibling},l.a.createElement(S.a,{trigger:["hover","focus"],overlay:l.a.createElement(j.a,{id:this.addToolTipId}," Add ")},l.a.createElement("span",null,l.a.createElement(q.a,{color:"green"})))),this.props.isDeleteAble&&l.a.createElement("div",{className:"node-option-btn-block",onClick:this.props.clickDelete},l.a.createElement(S.a,{trigger:["hover","focus"],overlay:l.a.createElement(j.a,{id:"delete-tooltip"}," Delete ")},l.a.createElement("span",null,l.a.createElement(q.b,{color:"red"})))),l.a.createElement("div",{className:"node-option-btn-block",onClick:this.props.clickOption},l.a.createElement(S.a,{trigger:["hover","focus"],overlay:l.a.createElement(j.a,{id:"option-tooltip"}," Option ")},l.a.createElement("span",null,l.a.createElement(G.a,null)))))}}var V=P;class B extends l.a.Component{constructor(e){super(e),this.selfType=void 0,this.childRef=void 0,this.optionFieldFormRef=void 0,this.childRef=l.a.createRef(),this.optionFieldFormRef=l.a.createRef();var t={name:F()("field_"),required:!0},a=Object(C.a)({showOptionModal:!1,showDescriptionModal:!1,isDeleteAble:!0,hasChild:!1,hasSibling:!0,requiredReadOnly:!1,field:e.field?Object(C.a)(Object(C.a)({},e.field),t):t},e);a.field||(a.field=t),this.state=a}get form(){return this.state.field}setShowOptionModal(e){this.setState({showOptionModal:e})}setShowDescriptionEditorModal(e){this.setState({showDescriptionModal:e})}addSibling(){this.props.addSibling&&this.props.addSibling(this.props.keyId)}addChild(){this.childRef.current.add("")}delete(){this.props.delete&&this.props.delete(this.props.keyId)}changeType(e){e.preventDefault(),e.target.value in $&&this.props.changeType(this.props.keyId,$[e.target.value])}setField(e,t){this.setState(a=>({field:Object(C.a)(Object(C.a)({},a.field),{},{[e]:t})}))}recordGenericField(e,t){"name"===e?(this.props.changeName(this.props.keyId,t.target.value),this.setField(e,t.target.value)):"required"===e?this.setField(e,t.target.checked):this.setField(e,t.target.value)}resetOptionFiledForm(){var e,t=this.state.field;for(e in t)"name"!==e&&"title"!==e&&"description"!==e&&"required"!==e&&delete t[e];this.optionFieldFormRef.current&&this.optionFieldFormRef.current.reset(),this.setState({field:t})}render(){return l.a.createElement("div",{className:"my-1"},this.state.info&&l.a.createElement(O.a,null,l.a.createElement(k.a,{lg:"auto",className:"px-0 mx-0",style:{width:(20*this.props.depth).toString()+"px"}}),l.a.createElement(k.a,null,l.a.createElement("span",{style:{color:"green"}},this.state.info," "))),l.a.createElement(y.a,null,l.a.createElement(y.a.Row,null,l.a.createElement(k.a,{lg:3},l.a.createElement(O.a,null,l.a.createElement(k.a,{lg:"auto",className:"px-0 mx-0",style:{width:(20*this.props.depth).toString()+"px"}}),l.a.createElement(k.a,null,l.a.createElement(M.a,null,l.a.createElement(S.a,{trigger:["hover","focus"],overlay:l.a.createElement(j.a,{id:"add-tooltip"}," Required ")},l.a.createElement(M.a.Prepend,null,l.a.createElement(M.a.Checkbox,{defaultChecked:this.state.field.required,disabled:this.state.requiredReadOnly,onChange:this.recordGenericField.bind(this,"required")}))),l.a.createElement(y.a.Control,{placeholder:"items",required:!0,readOnly:this.state.requiredReadOnly,defaultValue:this.state.field.name,onChange:this.recordGenericField.bind(this,"name")}))))),l.a.createElement(k.a,{lg:1},l.a.createElement(y.a.Control,{as:"select",custom:!0,placeholder:"DataType",onChange:this.changeType.bind(this),value:this.selfType},l.a.createElement("option",null,"Object"),l.a.createElement("option",null,"Array"),l.a.createElement("option",null,"String"),l.a.createElement("option",null,"Integer"),l.a.createElement("option",null,"Number"),l.a.createElement("option",null,"Null"),l.a.createElement("option",null,"Boolean"))),l.a.createElement(k.a,{lg:3},l.a.createElement(y.a.Control,{placeholder:"Titile",defaultValue:this.state.field.title,onChange:this.recordGenericField.bind(this,"title")})),l.a.createElement(k.a,{lg:4},l.a.createElement(M.a,null,l.a.createElement(I.a,{type:"text",id:"Description",placeholder:"Description",defaultValue:this.state.field.description,onChange:this.recordGenericField.bind(this,"description")}),l.a.createElement(S.a,{trigger:["hover","focus"],overlay:l.a.createElement(j.a,{id:"add-tooltip"}," Edit ")},l.a.createElement(M.a.Append,null,l.a.createElement(m.a,{variant:"outline-primary",onClick:this.setShowDescriptionEditorModal.bind(this,!0)},l.a.createElement(R.a,null))))),l.a.createElement(h.a,{onHide:this.setShowDescriptionEditorModal.bind(this,!1),show:this.state.showDescriptionModal,size:"lg","aria-labelledby":"description-modal",centered:!0},l.a.createElement(h.a.Header,{closeButton:!0},l.a.createElement(h.a.Title,{id:"description-modal"},"Description")),l.a.createElement(h.a.Body,null,l.a.createElement(y.a.Group,null,l.a.createElement(y.a.Control,{as:"textarea",rows:3,defaultValue:this.state.field.description,onChange:this.recordGenericField.bind(this,"description")}))))),l.a.createElement(k.a,{lg:1},l.a.createElement(V,{hasChild:this.state.hasChild,hasSibling:this.state.hasSibling,isDeleteAble:this.state.isDeleteAble,clickAddChild:this.addChild.bind(this),clickAddSibling:this.addSibling.bind(this),clickDelete:this.delete.bind(this),clickOption:this.setShowOptionModal.bind(this,!0)}),l.a.createElement(h.a,{onHide:this.setShowOptionModal.bind(this,!1),show:this.state.showOptionModal,size:"lg","aria-labelledby":"option-modal",centered:!0},l.a.createElement(h.a.Header,{closeButton:!0},l.a.createElement(h.a.Title,{id:"option-modal"},"Advanced Options")),l.a.createElement(h.a.Body,null,l.a.createElement(y.a,{ref:this.optionFieldFormRef},this.OptionModal(),l.a.createElement(y.a.Group,{as:O.a,controlId:"comment"},l.a.createElement(y.a.Label,{column:!0,lg:"2"},"Comment"),l.a.createElement(k.a,{lg:"10"},l.a.createElement(y.a.Control,{as:"textarea",rows:3,onChange:this.recordGenericField.bind(this,"$comment")}))))),l.a.createElement(h.a.Footer,null,l.a.createElement(m.a,{variant:"outline-secondary",onClick:this.resetOptionFiledForm.bind(this)},"Clear"),l.a.createElement(m.a,{variant:"outline-success",onClick:this.setShowOptionModal.bind(this,!1)},"Close")))))),this.state.hasChild&&l.a.createElement(T,{ref:this.childRef,depth:this.props.depth+1}))}}var H=B;var U=class extends H{constructor(e){super(Object(C.a)(Object(C.a)({},e),{},{hasChild:!0})),this.selfType=$.Array}componentDidMount(){this.addChild()}exportSchemaObj(){if(this.state.field.maxItems&&this.state.field.minItems&&this.state.field.minItems>this.state.field.maxItems)throw new Error("Find Error");var e,t=this.childRef.current.exportSchemaObj();return e=1===t.length?t[0].value:t.map(e=>e.value),Object(C.a)(Object(C.a)({type:"array"},Object(C.a)(Object(C.a)({},this.state.field),{},{required:void 0,name:void 0})),{},{items:e})}addChild(){0===this.childRef.current.length?this.childRef.current.add("",{isDeleteAble:!1,hasSibling:!0,requiredReadOnly:!0}):this.childRef.current.add("",{isDeleteAble:!0,hasSibling:!0,requiredReadOnly:!0})}delete(){this.props.delete&&this.props.delete(this.props.keyId)}recordField(e,t){"minItems"===e||"maxItems"===e?(this.setField(e,parseInt(t.target.value)),"minItems"===e&&this.state.field.maxItems&&parseInt(t.target.value)>this.state.field.maxItems||"maxItems"===e&&this.state.field.minItems&&parseInt(t.target.value)<this.state.field.minItems?this.setState({optionError:"The number of Min Items should less than or equal to Max Items."}):this.setState({optionError:void 0})):this.setField(e,t.target.checked)}OptionModal(){return l.a.createElement(l.a.Fragment,null,this.state.optionError&&l.a.createElement("span",{style:{color:"red"}},this.state.optionError," "),l.a.createElement(y.a.Group,{as:O.a},l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"MinItems"},"Min Items"),l.a.createElement(k.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",min:"0",id:"MinItems",defaultValue:this.state.field.minItems,onChange:this.recordField.bind(this,"minItems")})),l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"MaxItems"},"Max Items"),l.a.createElement(k.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",min:"0",id:"MaxItems",defaultValue:this.state.field.maxItems,onChange:this.recordField.bind(this,"maxItems")}))),l.a.createElement(y.a.Group,null,l.a.createElement(y.a.Check,{type:"checkbox",id:"uniqueCheckbox"},l.a.createElement(y.a.Check.Input,{type:"checkbox",defaultChecked:this.state.field.uniqueItems,checked:this.state.field.uniqueItems,onChange:this.recordField.bind(this,"uniqueItems")}),l.a.createElement(y.a.Check.Label,null,"Unique Items"))))}};var J=class extends H{constructor(...e){super(...e),this.selfType=$.Boolean}recordField(e,t){""===t.target.value?this.setField(e,void 0):"True"===t.target.value?this.setField(e,!0):this.setField(e,!1)}exportSchemaObj(){return{type:"boolean",default:this.state.field.default}}OptionModal(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(y.a.Group,{as:O.a},l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"MinLength"},"Default"),l.a.createElement(k.a,{lg:"4"},l.a.createElement(y.a.Control,{as:"select",onChange:this.recordField.bind(this,"default")},l.a.createElement("option",null),l.a.createElement("option",null,"True"),l.a.createElement("option",null,"False")))))}};var W=class extends H{constructor(e){super(e),this.selfType=$.Integer,this.minExclusiveCheckedRef=void 0,this.maxExclusiveCheckedRef=void 0,this.minExclusiveCheckedRef=l.a.createRef(),this.maxExclusiveCheckedRef=l.a.createRef()}recordField(e,t){t.preventDefault(),"default"===e||"const"===e||"multipleOf"===e?this.setField(e,parseInt(t.target.value)):"minimum"===e?this.minExclusiveCheckedRef.current.checked?(this.setField("exclusiveMinimum",parseInt(t.target.value)),this.setField("minimum",void 0)):(this.setField("minimum",parseInt(t.target.value)),this.setField("exclusiveMinimum",void 0)):"maximum"===e?this.maxExclusiveCheckedRef.current.checked?(this.setField("exclusiveMaximum",parseInt(t.target.value)),this.setField("maximum",void 0)):(this.setField("maximum",parseInt(t.target.value)),this.setField("exclusiveMaximum",void 0)):"exclusiveMinimum"===e?t.target.checked&&this.state.field.minimum?(this.setField("exclusiveMinimum",this.state.field.minimum),this.setField("minimum",void 0)):!t.target.checked&&this.state.field.exclusiveMinimum&&(this.setField("minimum",this.state.field.exclusiveMinimum),this.setField("exclusiveMinimum",void 0)):"exclusiveMaximum"===e&&(t.target.checked&&this.state.field.maximum?(this.setField("exclusiveMaximum",this.state.field.maximum),this.setField("maximum",void 0)):!t.target.checked&&this.state.field.exclusiveMaximum&&(this.setField("maximum",this.state.field.exclusiveMaximum),this.setField("exclusiveMaximum",void 0)))}recordEnumField(e,t){t.preventDefault(),this.setField("enum",this.state.field.enum.map((a,i)=>i===e?parseInt(t.target.value):a))}addEnum(e){var t;e.preventDefault(),t=this.state.field.enum?[...this.state.field.enum,""]:[""],this.setField("enum",t)}exportSchemaObj(){return Object(C.a)({type:"integer"},Object(C.a)(Object(C.a)({},this.state.field),{},{required:void 0,name:void 0}))}OptionModal(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(y.a.Group,{as:O.a,controlId:"MinValue"},l.a.createElement(y.a.Label,{column:!0,lg:"2"},"Min Value"),l.a.createElement(k.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",onChange:this.recordField.bind(this,"minimum")})),l.a.createElement(k.a,{lg:"6"},l.a.createElement(y.a.Check,{id:"ExclusiveMin",inline:!0,ref:this.minExclusiveCheckedRef,onChange:this.recordField.bind(this,"exclusiveMinimum"),defaultChecked:!!this.state.field.exclusiveMinimum,label:"Exclusive",type:"checkbox",style:{height:"100%"}}))),l.a.createElement(y.a.Group,{as:O.a,controlId:"MaxValue"},l.a.createElement(y.a.Label,{column:!0,lg:"2"},"Max Value"),l.a.createElement(k.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",onChange:this.recordField.bind(this,"maximum")})),l.a.createElement(k.a,{lg:"6"},l.a.createElement(y.a.Check,{id:"ExclusiveMax",inline:!0,ref:this.maxExclusiveCheckedRef,onChange:this.recordField.bind(this,"exclusiveMinimum"),defaultChecked:!!this.state.field.exclusiveMaximum,label:"Exclusive",type:"checkbox",style:{height:"100%"}}))),l.a.createElement(y.a.Group,{as:O.a},l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"Default"},"Default"),l.a.createElement(k.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",id:"Default",onChange:this.recordField.bind(this,"default")})),l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"MultipleOf"},"Multiple Of"),l.a.createElement(k.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",id:"MultipleOf",onChange:this.recordField.bind(this,"multipleOf")}))),l.a.createElement(y.a.Group,{as:O.a},l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"const"},"Constant"),l.a.createElement(k.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",id:"const",placeholder:"Restricted Value",onChange:this.recordField.bind(this,"const")}))),l.a.createElement(y.a.Group,null,this.state.field.enum?this.state.field.enum.map((e,t)=>l.a.createElement(y.a.Group,{as:O.a,key:t},l.a.createElement(y.a.Label,{column:!0,lg:"2"},0===t?"Enum":""),l.a.createElement(k.a,{lg:"4"},t===this.state.field.enum.length-1?l.a.createElement(M.a,null,l.a.createElement(I.a,{type:"number",id:t.toString(),onChange:this.recordEnumField.bind(this,t),defaultValue:e}),l.a.createElement(M.a.Append,null,l.a.createElement(m.a,{variant:"outline-success",onClick:this.addEnum.bind(this)},l.a.createElement(q.a,null)))):l.a.createElement(I.a,{type:"number",id:t.toString(),onChange:this.recordEnumField.bind(this,t),defaultValue:e})))):l.a.createElement(y.a.Group,{as:O.a},l.a.createElement(y.a.Label,{column:!0,lg:"2"},"Enum"),l.a.createElement(k.a,{lg:"10"},l.a.createElement(O.a,null,l.a.createElement(k.a,{lg:"12"},l.a.createElement(m.a,{variant:"outline-success",onClick:this.addEnum.bind(this)},l.a.createElement(q.a,{color:"green"}))))))))}};var z=class extends H{constructor(e){super(e),this.selfType=$.Number,this.minExclusiveCheckedRef=void 0,this.maxExclusiveCheckedRef=void 0,this.minExclusiveCheckedRef=l.a.createRef(),this.maxExclusiveCheckedRef=l.a.createRef()}recordField(e,t){"default"===e||"const"===e||"multipleOf"===e?this.setField(e,parseFloat(t.target.value)):"minimum"===e?this.minExclusiveCheckedRef.current.checked?(this.setField("exclusiveMinimum",parseFloat(t.target.value)),this.setField("minimum",void 0)):(this.setField("minimum",parseFloat(t.target.value)),this.setField("exclusiveMinimum",void 0)):"maximum"===e?this.maxExclusiveCheckedRef.current.checked?(this.setField("exclusiveMaximum",parseFloat(t.target.value)),this.setField("maximum",void 0)):(this.setField("maximum",parseFloat(t.target.value)),this.setField("exclusiveMaximum",void 0)):"exclusiveMinimum"===e?(console.log(t.target.checked),t.target.checked&&this.state.field.minimum?(this.setField("exclusiveMinimum",this.state.field.minimum),this.setField("minimum",void 0)):!t.target.checked&&this.state.field.exclusiveMinimum&&(this.setField("minimum",this.state.field.exclusiveMinimum),this.setField("exclusiveMinimum",void 0))):"exclusiveMaximum"===e&&(t.target.checked&&this.state.field.maximum?(this.setField("exclusiveMaximum",this.state.field.maximum),this.setField("maximum",void 0)):!t.target.checked&&this.state.field.exclusiveMaximum&&(this.setField("maximum",this.state.field.exclusiveMaximum),this.setField("exclusiveMaximum",void 0)))}recordEnumField(e,t){t.preventDefault(),this.setField("enum",this.state.field.enum.map((a,i)=>i===e?parseFloat(t.target.value):a))}addEnum(e){var t;e.preventDefault(),t=this.state.field.enum?[...this.state.field.enum,""]:[""],this.setField("enum",t)}exportSchemaObj(){return Object(C.a)({type:"number"},Object(C.a)(Object(C.a)({},this.state.field),{},{required:void 0,name:void 0}))}OptionModal(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(y.a.Group,{as:O.a,controlId:"MinValue"},l.a.createElement(y.a.Label,{column:!0,lg:"2"},"Min Value"),l.a.createElement(k.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",onChange:this.recordField.bind(this,"minimum")})),l.a.createElement(k.a,{lg:"6"},l.a.createElement(y.a.Check,{id:"ExclusiveMin",inline:!0,label:"Exclusive",ref:this.minExclusiveCheckedRef,onChange:this.recordField.bind(this,"exclusiveMinimum"),defaultChecked:!!this.state.field.exclusiveMinimum,type:"checkbox",style:{height:"100%"}}))),l.a.createElement(y.a.Group,{as:O.a,controlId:"MaxValue"},l.a.createElement(y.a.Label,{column:!0,lg:"2"},"Max Value"),l.a.createElement(k.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",onChange:this.recordField.bind(this,"maximum")})),l.a.createElement(k.a,{lg:"6"},l.a.createElement(y.a.Check,{id:"ExclusiveMax",inline:!0,label:"Exclusive",ref:this.maxExclusiveCheckedRef,onChange:this.recordField.bind(this,"exclusiveMaximum"),defaultChecked:!!this.state.field.exclusiveMaximum,type:"checkbox",style:{height:"100%"}}))),l.a.createElement(y.a.Group,{as:O.a},l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"Default"},"Default"),l.a.createElement(k.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",id:"Default",onChange:this.recordField.bind(this,"default")})),l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"MultipleOf"},"Multiple Of"),l.a.createElement(k.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",id:"MultipleOf",onChange:this.recordField.bind(this,"multipleOf")}))),l.a.createElement(y.a.Group,{as:O.a},l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"const"},"Constant"),l.a.createElement(k.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",id:"const",placeholder:"Restricted Value",onChange:this.recordField.bind(this,"const")}))),this.state.field.enum?this.state.field.enum.map((e,t)=>l.a.createElement(y.a.Group,{as:O.a,key:t},l.a.createElement(y.a.Label,{column:!0,lg:"2"},0===t?"Enum":""),l.a.createElement(k.a,{lg:"6"},t===this.state.field.enum.length-1?l.a.createElement(M.a,null,l.a.createElement(I.a,{type:"number",id:t.toString(),onChange:this.recordEnumField.bind(this,t),defaultValue:e}),l.a.createElement(M.a.Append,null,l.a.createElement(m.a,{variant:"outline-success",onClick:this.addEnum.bind(this)},l.a.createElement(q.a,null)))):l.a.createElement(I.a,{type:"number",id:t.toString(),onChange:this.recordEnumField.bind(this,t),defaultValue:e})))):l.a.createElement(y.a.Group,{as:O.a},l.a.createElement(y.a.Label,{column:!0,lg:"2"},"Enum"),l.a.createElement(k.a,{lg:"10"},l.a.createElement(O.a,null,l.a.createElement(k.a,{lg:"12"},l.a.createElement(m.a,{variant:"outline-success",onClick:this.addEnum.bind(this)},l.a.createElement(q.a,{color:"green"})))))))}};var _=class extends H{recordField(e,t){}constructor(e){super(Object(C.a)({},e)),this.selfType=$.Null}exportSchemaObj(){return Object(C.a)({type:"null"},Object(C.a)(Object(C.a)({},this.state.field),{},{required:void 0,name:void 0}))}OptionModal(){return l.a.createElement(l.a.Fragment,null)}};var K=class extends H{recordField(e,t){"maxProperties"!==e&&"minProperties"!==e||(this.setField(e,parseInt(t.target.value)),"minProperties"===e&&this.state.field.maxProperties&&parseInt(t.target.value)>this.state.field.maxProperties||"maxProperties"===e&&this.state.field.minProperties&&parseInt(t.target.value)<this.state.field.minProperties?this.setState({optionError:"The number of Min Properties should less than or equal to Max Properties."}):this.setState({optionError:void 0}))}constructor(e){super(Object(C.a)(Object(C.a)({},e),{},{hasChild:!0})),this.selfType=$.Object}exportSchemaObj(){var e;if(this.state.field.maxProperties&&this.state.field.minProperties&&this.state.field.minProperties>this.state.field.maxProperties)throw new Error("Find Error");var t=null===(e=this.childRef.current)||void 0===e?void 0:e.exportSchemaObj(),a={},i=[];if(t){var l,r=Object(w.a)(t);try{for(r.s();!(l=r.n()).done;){var n=l.value;a[n.name]=Object(C.a)({},n.value),n.required&&i.push(n.name)}}catch(s){r.e(s)}finally{r.f()}}return Object(C.a)(Object(C.a)({type:"object"},Object(C.a)(Object(C.a)({},this.state.field),{},{name:void 0})),{},{properties:a,required:i})}OptionModal(){return l.a.createElement(l.a.Fragment,null,this.state.optionError&&l.a.createElement("span",{style:{color:"red"}},this.state.optionError," "),l.a.createElement(y.a.Group,{as:O.a},l.a.createElement(y.a.Label,{column:!0,lg:"auto",htmlFor:"MinProperties"},"Min Properties"),l.a.createElement(k.a,null,l.a.createElement(y.a.Control,{type:"number",min:"0",id:"MinProperties",defaultValue:this.state.field.minProperties,onChange:this.recordField.bind(this,"minProperties")})),l.a.createElement(y.a.Label,{column:!0,lg:"auto",htmlFor:"MaxProperties"},"Max Properties"),l.a.createElement(k.a,null,l.a.createElement(y.a.Control,{type:"number",min:"0",id:"MaxProperties",defaultValue:this.state.field.maxProperties,onChange:this.recordField.bind(this,"maxProperties")}))))}};var $,Q=class extends H{constructor(...e){super(...e),this.selfType=$.String}recordField(e,t){"minLength"===e||"maxLength"===e?(this.setField(e,parseInt(t.target.value)),"minLength"===e&&this.state.field.maxLength&&parseInt(t.target.value)>this.state.field.maxLength||"maxLength"===e&&this.state.field.minLength&&parseInt(t.target.value)<this.state.field.minLength?this.setState({optionError:"The number of Min Length should less than or equal to Max Length."}):this.setState({optionError:void 0})):"default"===e||"const"===e||"pattern"===e?this.setField(e,t.target.value):"format"===e&&(""===t.target.value?this.setField(e,void 0):this.setField(e,t.target.value))}recordEnumField(e,t){this.setField("enum",this.state.field.enum.map((a,i)=>i===e?t.target.value:a))}addEnum(e){var t;e.preventDefault(),t=this.state.field.enum?[...this.state.field.enum,""]:[""],this.setField("enum",t)}exportSchemaObj(){if(this.state.field.maxLength&&this.state.field.minLength&&this.state.field.maxLength>this.state.field.minLength)throw new Error("Find Error");return Object(C.a)({type:"string"},Object(C.a)(Object(C.a)({},this.state.field),{},{required:void 0,name:void 0}))}OptionModal(){return l.a.createElement(l.a.Fragment,null,this.state.optionError&&l.a.createElement("span",{style:{color:"red"}},this.state.optionError," "),l.a.createElement(y.a.Group,{as:O.a},l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"Default"},"Default"),l.a.createElement(k.a,{lg:"10"},l.a.createElement(y.a.Control,{type:"text",min:"0",id:"Default",onChange:this.recordField.bind(this,"default")}))),l.a.createElement(y.a.Group,{as:O.a},l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"MinLength"},"Min Length"),l.a.createElement(k.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",min:"0",id:"MinLength",onChange:this.recordField.bind(this,"minLength")})),l.a.createElement(y.a.Label,{column:!0,lg:"2",htmlFor:"MaxLength"},"Max Length"),l.a.createElement(k.a,{lg:"4"},l.a.createElement(y.a.Control,{type:"number",min:"0",id:"MaxLength",onChange:this.recordField.bind(this,"maxLength")}))),l.a.createElement(y.a.Group,{as:O.a,controlId:"Format"},l.a.createElement(y.a.Label,{column:!0,lg:"2"},"Format"),l.a.createElement(k.a,{lg:"10"},l.a.createElement(y.a.Control,{as:"select",onChange:this.recordField.bind(this,"format")},["","date-time","time","date","email","idn-email","hostname","idn-hostname","ipv4","ipv6","uri","uri-reference","iri","iri-reference","uri-template","json-pointer","relative-json-pointer","regex"].map((e,t)=>l.a.createElement("option",{key:t},e))))),l.a.createElement(y.a.Group,{as:O.a,controlId:"Pattern"},l.a.createElement(y.a.Label,{column:!0,lg:"2"},"Pattern"),l.a.createElement(k.a,{lg:"10"},l.a.createElement(y.a.Control,{type:"text",placeholder:"Regular Expression",onChange:this.recordField.bind(this,"pattern")}))),l.a.createElement(y.a.Group,{as:O.a,controlId:"const"},l.a.createElement(y.a.Label,{column:!0,lg:"2"},"Constant"),l.a.createElement(k.a,{lg:"10"},l.a.createElement(y.a.Control,{type:"text",placeholder:"Restricted Value",onChange:this.recordField.bind(this,"const")}))),this.state.field.enum?this.state.field.enum.map((e,t)=>l.a.createElement(y.a.Group,{as:O.a,key:t},l.a.createElement(y.a.Label,{column:!0,lg:"2"},0===t?"Enum":""),l.a.createElement(k.a,{lg:"10"},t===this.state.field.enum.length-1?l.a.createElement(M.a,null,l.a.createElement(I.a,{type:"text",id:t.toString(),onChange:this.recordEnumField.bind(this,t),defaultValue:e}),l.a.createElement(M.a.Append,null,l.a.createElement(m.a,{variant:"outline-success",onClick:this.addEnum.bind(this)},l.a.createElement(q.a,null)))):l.a.createElement(I.a,{type:"text",id:t.toString(),onChange:this.recordEnumField.bind(this,t),defaultValue:e})))):l.a.createElement(y.a.Group,{as:O.a},l.a.createElement(y.a.Label,{column:!0,lg:"2"},"Enum"),l.a.createElement(k.a,{lg:"10"},l.a.createElement(O.a,null,l.a.createElement(k.a,{lg:"12"},l.a.createElement(m.a,{variant:"outline-success",onClick:this.addEnum.bind(this)},l.a.createElement(q.a,{color:"green"})))))))}};!function(e){e.Array="Array",e.Boolean="Boolean",e.Integer="Integer",e.Number="Number",e.Object="Object",e.String="String",e.Null="Null"}($||($={}));class X extends l.a.Component{constructor(e){super(e),this.nodeRef=void 0,this.nodeRef=l.a.createRef(),this.state={type:$.Object}}changeType(e,t){this.setState({type:t})}exportSchemaObj(){return this.nodeRef.current.exportSchemaObj()}render(){return l.a.createElement(L,{ref:this.nodeRef,key:F()("childId"),keyId:F()("childId"),depth:0,type:this.state.type,isDeleteAble:!1,hasSibling:!1,requiredReadOnly:!0,field:{name:"root",required:!0},changeType:this.changeType.bind(this),changeName:()=>!0})}}var Y=X;class Z extends l.a.Component{constructor(e){super(e),this.rootNode=void 0,this.rootNodeRef=void 0,this.fileUploadRef=void 0,this.state={showExport:!1,exportString:""},this.fileUploadRef=l.a.createRef(),this.rootNodeRef=l.a.createRef(),this.rootNode=l.a.createElement(Y,{ref:this.rootNodeRef,schema:this.state.schema})}toggleImport(e){this.fileUploadRef.current.click()}importSchema(e){var t=this;return Object(d.a)(c.a.mark((function a(){var i,l,r;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.target.files){a.next=17;break}return a.prev=1,a.next=4,e.target.files[0].text();case 4:i=a.sent,l=JSON.parse(i),(r=new g.a({schemaId:"auto"})).addMetaSchema(b),r.addMetaSchema(f),r.validateSchema(l)?t.setState({schema:l}):t.setState({errorMessage:"Parsing Schema Error! Please check your schema."}),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(1),t.setState({errorMessage:"Parsing Schema Error! We only support draft-04/06/07 "});case 17:case"end":return a.stop()}}),a,null,[[1,14]])})))()}toggleExport(e){if(e)try{var t=this.rootNodeRef.current.exportSchemaObj();this.setState({exportString:JSON.stringify(t,null,4),showExport:!0,errorMessage:void 0})}catch(a){this.setState({errorMessage:"There's still some errors in your schema! Please check and try again!"})}else this.setState({showExport:!1,errorMessage:void 0})}saveSchema(){var e=new Blob([this.state.exportString],{type:"application/json"}),t=window.URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.setAttribute("download","Schema.json"),document.body.appendChild(a),a.click(),document.body.removeChild(a)}render(){return l.a.createElement("div",{className:"my-3 mx-4 "},l.a.createElement("input",{type:"file",id:"file-uploader","data-target":"file-uploader",hidden:!0,ref:this.fileUploadRef,onChange:this.importSchema.bind(this)}),l.a.createElement(m.a,{variant:"outline-primary",onClick:this.toggleImport.bind(this,!0)},"Import from file")," "," ",l.a.createElement(m.a,{variant:"outline-success",onClick:this.toggleExport.bind(this,!0)},"Export Schema"),l.a.createElement("div",null,this.rootNode),l.a.createElement(h.a,{size:"xl",scrollable:!0,show:this.state.showExport,onHide:this.toggleExport.bind(this,!1)},l.a.createElement(h.a.Header,{closeButton:!0},l.a.createElement(h.a.Title,null,"Export")),l.a.createElement(h.a.Body,null,l.a.createElement("div",{style:{maxHeight:"80%"}},l.a.createElement(p.a,{language:"json",style:v.a,showLineNumbers:!0},this.state.exportString))),l.a.createElement(h.a.Footer,null,l.a.createElement(m.a,{variant:"outline-success",onClick:this.saveSchema.bind(this)},"Save"))),this.state.errorMessage&&l.a.createElement(u.a,{show:!!this.state.errorMessage,onClose:()=>{this.setState({errorMessage:void 0})},delay:3e3,autohide:!0,style:{position:"absolute",bottom:"20px",right:"20px",borderColor:"red",color:"red"}},l.a.createElement(u.a.Header,{style:{borderColor:"red",color:"red"}},l.a.createElement("strong",{className:"mr-auto"},"Error")),l.a.createElement(u.a.Body,null,this.state.errorMessage)))}}var ee=Z;class te extends l.a.Component{render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},l.a.createElement(s.a.Brand,{href:""},"JSON Schema Editor"),l.a.createElement(s.a.Collapse,{className:"justify-content-end"},l.a.createElement(s.a.Text,null,l.a.createElement("a",{href:"https://github.com/JingWangTW/json-schema-editor",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("img",{height:"30px",src:"https://github.com/fluidicon.png",alt:"Github ICON"}))))),l.a.createElement(ee,null))}}var ae=te;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})},60:function(e,t,a){},84:function(e,t,a){e.exports=a(332)}},[[84,1,2]]]);
//# sourceMappingURL=main.b01a03bc.chunk.js.map