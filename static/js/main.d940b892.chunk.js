(this["webpackJsonpjson-schema-editor"]=this["webpackJsonpjson-schema-editor"]||[]).push([[0],{122:function(e,t,i){"use strict";i.r(t);i(54);var a=i(1),r=i.n(a),n=i(16),l=i.n(n),s=i(135),o=i(60),c=i.n(o),d=i(71),h=i(72),m=i.n(h),u=i(73),p=i(74),F=i(75),g=i(134),b=i(3);class f{static next(e="global"){return e in f.mappedKeyId||(f.mappedKeyId[e]=0),f.mappedKeyId[e]++,f.mappedKeyId[e]}}function E(e,t){return void 0===e?t:e}function O(e,t,i){const a=i.value;return i.value=function(...e){const t=a.apply(this,e);return t&&t instanceof Object?Object(b.a)({},t):t},i}let v;f.mappedKeyId={},function(e){e.Array="array",e.Boolean="boolean",e.Integer="integer",e.Number="number",e.Object="object",e.String="string",e.Null="null"}(v||(v={}));var y,x=i(129),N=i(77),S=i(132),j=i(9);var C,M=(y=class{constructor(){this.type=void 0,this.currentField=void 0,this.defaultField=void 0}recordField(e,t){switch(typeof this.currentField[e]){case"string":this.currentField[e]=t.target.value.toString();break;case"boolean":this.currentField[e]=t.target.checked;break;case"number":this.currentField[e]=parseInt(t.target.value)}return this.currentField}getDefaultField(){return this.defaultField}getCurrentField(){return this.currentField}getGenericSchemaFromField(e){const t={};return e.title&&""!==e.title&&(t.title=e.title),e.description&&""!==e.description&&(t.description=e.description),e.$comment&&""!==e.$comment&&(t.$comment=e.$comment),t}getGenericFieldFromSchema(e,t){let i;return void 0===e&&(e={}),i=void 0===t?{type:this.type,required:!0,name:"Field_".concat(f.next("Field"))}:Object(b.a)({type:this.type},t),{type:this.type,required:i.required,name:i.name,title:E(e.title,E(i.title,"")),description:E(e.description,E(i.description,"")),$comment:E(e.$comment,E(i.$comment,""))}}retrieveDefaultOptionValue(e,t,i){return i&&e in i&&void 0!==i[e]?i[e]:t}exportSchemaWithoutUndefined(e,t){const i={};return"number"===typeof t&&isNaN(t)?isNaN(this.currentField[e])||(i[e]=this.currentField[e]):this.currentField[e]!==t&&(i[e]=this.currentField[e]),i}},Object(j.a)(y.prototype,"recordField",[O],Object.getOwnPropertyDescriptor(y.prototype,"recordField"),y.prototype),Object(j.a)(y.prototype,"getDefaultField",[O],Object.getOwnPropertyDescriptor(y.prototype,"getDefaultField"),y.prototype),Object(j.a)(y.prototype,"getCurrentField",[O],Object.getOwnPropertyDescriptor(y.prototype,"getCurrentField"),y.prototype),y);var R=(C=class extends M{constructor(e,t){super(),this.type=v.Array,this.currentField=void 0,this.defaultField=void 0,this.childrenProperty=void 0;const i=this.getGenericFieldFromSchema(e,t);this.defaultField=Object(b.a)(Object(b.a)({},i),{},{minItems:this.retrieveDefaultOptionValue("minItems",NaN,e),maxItems:this.retrieveDefaultOptionValue("maxItems",NaN,e),uniqueItems:this.retrieveDefaultOptionValue("uniqueItems",!1,e)}),this.currentField=Object(b.a)({},this.defaultField),e&&(this.childrenProperty=this.generateChildrenPropertyFromSchema(e))}generateChildrenPropertyFromSchema(e){return e.items?e.items instanceof Array?e.items.map(e=>({type:e.type,selfId:f.next("child").toString(),hasSibling:!0,isDeleteable:!0,isRequiredFieldReadonly:!0,isNameFieldReadonly:!0,ref:r.a.createRef(),field:{name:"items",required:!0},schema:e})):[{type:e.type,selfId:f.next("child").toString(),hasSibling:!0,isDeleteable:!0,isRequiredFieldReadonly:!0,isNameFieldReadonly:!0,ref:r.a.createRef(),field:{name:"items",required:!0},schema:e.items}]:[]}resetOptionField(){return this.currentField.maxItems=this.defaultField.maxItems,this.currentField.minItems=this.defaultField.minItems,this.currentField.uniqueItems=this.defaultField.uniqueItems,this.currentField}clearOptionField(){return this.currentField.maxItems=NaN,this.currentField.minItems=NaN,this.currentField.uniqueItems=!1,this.currentField}exportSchema(e){const t=v.Array,i=this.getGenericSchemaFromField(this.currentField),a=this.currentField.uniqueItems,r=this.exportSchemaWithoutUndefined("minItems",NaN),n=this.exportSchemaWithoutUndefined("maxItems",NaN);let l;return e&&(1===e.length?l=e[0].value:e.length>1&&(l=e.map(e=>e.value))),Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({type:t},i),r),n),{},{uniqueItems:a,items:l})}},Object(j.a)(C.prototype,"resetOptionField",[O],Object.getOwnPropertyDescriptor(C.prototype,"resetOptionField"),C.prototype),Object(j.a)(C.prototype,"clearOptionField",[O],Object.getOwnPropertyDescriptor(C.prototype,"clearOptionField"),C.prototype),C),D=i(130);class w extends r.a.Component{constructor(e){super(e),this.state={isOptionModalShow:!1}}setDisplayOptionModal(e){this.setState({isOptionModalShow:e})}render(){return r.a.createElement(D.a,{onHide:this.setDisplayOptionModal.bind(this,!1),show:this.state.isOptionModalShow,size:"lg","aria-labelledby":"option-modal",centered:!0},r.a.createElement(D.a.Header,{closeButton:!0},r.a.createElement(D.a.Title,{id:"option-modal"},"Advanced Options")),r.a.createElement(D.a.Body,null,this.props.children),r.a.createElement(D.a.Footer,null,r.a.createElement(F.a,{variant:"outline-secondary",onClick:this.props.clearOptionFieldForm},"Clear"),r.a.createElement(F.a,{variant:"outline-primary",onClick:this.props.resetOptionFiledForm},"Reset"),r.a.createElement(F.a,{variant:"outline-success",onClick:this.setDisplayOptionModal.bind(this,!1)},"Close")))}}var I=w,P=i(133),k=i(127),L=i(136),B=i(128),T=i(76),U=i(51),V=i(78);class q extends r.a.Component{constructor(e){super(e);const t=e.schemaType.getDefaultField();this.state={currentField:t,isRequiredFieldReadonly:E(this.props.options.isRequiredFieldReadonly,!1),isNameFieldReadonly:E(this.props.options.isNameFieldReadonly,!1),isDescriptionModalShow:!1,isCommentFieldShow:!1}}recordField(e,t){const i=this.props.schemaType.recordField(e,t);this.setState({currentField:i})}changeType(e){e.preventDefault();const t=e.target.value;Object.values(v).includes(t)&&this.props.changeType(t)}changeName(e){this.recordField("name",e),this.props.changeName&&this.props.changeName()}setDisplayDescriptionModal(e){this.setState({isDescriptionModalShow:e})}render(){return r.a.createElement(P.a,null,r.a.createElement(S.a.Row,null,r.a.createElement(N.a,null,r.a.createElement(S.a.Row,null,r.a.createElement(N.a,{lg:3},r.a.createElement(k.a,null,r.a.createElement(L.a,{trigger:["hover","focus"],overlay:r.a.createElement(B.a,{id:"add-tooltip"}," Required ")},r.a.createElement(k.a.Prepend,null,r.a.createElement(k.a.Checkbox,{checked:this.state.currentField.required,disabled:this.state.isRequiredFieldReadonly,onChange:this.recordField.bind(this,"required")}))),r.a.createElement(S.a.Control,{placeholder:"items",readOnly:this.state.isNameFieldReadonly,value:this.state.currentField.name,onChange:this.changeName.bind(this)}))),r.a.createElement(N.a,{lg:1},r.a.createElement(S.a.Control,{as:"select",custom:!0,placeholder:"DataType",onChange:this.changeType.bind(this),value:this.state.currentField.type},r.a.createElement("option",{value:v.Object},"Object"),r.a.createElement("option",{value:v.Array},"Array"),r.a.createElement("option",{value:v.String},"String"),r.a.createElement("option",{value:v.Integer},"Integer"),r.a.createElement("option",{value:v.Number},"Number"),r.a.createElement("option",{value:v.Null},"Null"),r.a.createElement("option",{value:v.Boolean},"Boolean"))),r.a.createElement(N.a,{lg:4},r.a.createElement(S.a.Control,{placeholder:"Titile",value:this.state.currentField.title,onChange:this.recordField.bind(this,"title")})),r.a.createElement(N.a,{lg:4},r.a.createElement(k.a,null,r.a.createElement(T.a,{type:"text",id:"Description",placeholder:"Description",value:this.state.currentField.description,onChange:this.recordField.bind(this,"description")}),r.a.createElement(L.a,{trigger:["hover","focus"],overlay:r.a.createElement(B.a,{id:"add-tooltip"}," Edit ")},r.a.createElement(k.a.Append,null,r.a.createElement(F.a,{variant:"outline-primary",onClick:this.setDisplayDescriptionModal.bind(this,!0)},r.a.createElement(V.a,null))))),r.a.createElement(D.a,{onHide:this.setDisplayDescriptionModal.bind(this,!1),show:this.state.isDescriptionModalShow,size:"lg","aria-labelledby":"description-modal",centered:!0},r.a.createElement(D.a.Header,{closeButton:!0},r.a.createElement(D.a.Title,{id:"description-modal"},"Description")),r.a.createElement(D.a.Body,null,r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Control,{as:"textarea",rows:3,value:this.state.currentField.description,onChange:this.recordField.bind(this,"description")}))))),r.a.createElement(N.a,{lg:12,style:{paddingTop:"5px"}},r.a.createElement(P.a.Collapse,{eventKey:"0"},r.a.createElement(S.a.Control,{placeholder:"$comment",value:this.state.currentField.$comment,onChange:this.recordField.bind(this,"$comment")}))))),r.a.createElement(N.a,{lg:"auto",style:{cursor:"pointer"}},r.a.createElement(P.a.Toggle,{eventKey:"0",as:"span",className:"node-option-block"},r.a.createElement(U.a,{color:"blue"})))))}}var A=q;class G extends r.a.Component{renderHint(){const e=[];if(this.props.hint){let t;for(t in this.props.hint)if(void 0!==this.props.hint[t])switch(t){case"info":e.push(r.a.createElement("span",{style:{color:"green"}},r.a.createElement("b",null,"Hint: "),this.props.hint[t])),e.push(r.a.createElement("br",null));break;case"warn":e.push(r.a.createElement("span",{style:{color:"orange"}},r.a.createElement("b",null,"Warning: "),this.props.hint[t])),e.push(r.a.createElement("br",null));break;case"error":e.push(r.a.createElement("span",{style:{color:"red"}},r.a.createElement("b",null,"Error: ".concat(this.props.hint[t])))),e.push(r.a.createElement("br",null))}}return e}render(){return this.props.hint?r.a.createElement(r.a.Fragment,null,this.renderHint()):r.a.createElement(r.a.Fragment,null)}}var H=G,W=i(131),K=i(24);const $=r.a.forwardRef((e,t)=>r.a.createElement("span",{ref:t,id:e.id,onClick:e.onClick},r.a.createElement(K.b,{color:"green"})));$.displayName="ToggleAddButton";var J=function(e){if(e.buttonOptions.hasChild&&!e.addChild)throw new Error("Bad arguments to create NodeOptionsButtons: Provide buttonOptions.hasChild = true, without addChild()");if(e.buttonOptions.hasSibling&&!e.addSibling)throw new Error("Bad arguments to create NodeOptionsButtons: Provide buttonOptions.hasSibling = true, without addSibling()");if(e.buttonOptions.isDeleteable&&!e.delete)throw new Error("Bad arguments to create NodeOptionsButtons: Provide buttonOptions.isDeleteable = true, without delete()");const t=f.next("Key").toString(),i=f.next("Key").toString();return r.a.createElement("div",{className:"node-option-block"},e.buttonOptions.hasChild&&e.buttonOptions.hasSibling&&r.a.createElement("div",{className:"node-option-btn-block"},r.a.createElement(W.a,null,r.a.createElement(W.a.Toggle,{as:$,id:t}),r.a.createElement(W.a.Menu,null,r.a.createElement(W.a.Item,{href:"#",eventKey:"1",onClick:e.addSibling},"Add Sibling"),r.a.createElement(W.a.Item,{href:"#",eventKey:"2",onClick:e.addChild},"Add Child")))),e.buttonOptions.hasChild!==e.buttonOptions.hasSibling&&r.a.createElement("div",{className:"node-option-btn-block",onClick:e.buttonOptions.hasChild?e.addChild:e.addSibling},r.a.createElement(L.a,{trigger:["hover","focus"],overlay:r.a.createElement(B.a,{id:i}," Add ")},r.a.createElement("span",null,r.a.createElement(K.b,{color:"green"})))),e.buttonOptions.isDeleteable&&r.a.createElement("div",{className:"node-option-btn-block",onClick:e.delete},r.a.createElement(L.a,{trigger:["hover","focus"],overlay:r.a.createElement(B.a,{id:"delete-tooltip"}," Delete ")},r.a.createElement("span",null,r.a.createElement(K.c,{color:"red"})))),e.buttonOptions.isOptionExist&&r.a.createElement("div",{className:"node-option-btn-block",onClick:e.showOptionModal},r.a.createElement(L.a,{trigger:["hover","focus"],overlay:r.a.createElement(B.a,{id:"option-tooltip"}," Option ")},r.a.createElement("span",null,r.a.createElement(U.b,null)))))};var z=function(e){return r.a.createElement(N.a,{lg:"auto",className:"px-0 mx-0",style:{width:(15*e.depth).toString()+"px"}})};class _ extends r.a.Component{constructor(e){super(e);const t=E(e.childrenProperty,[]);this.state={children:t}}componentDidMount(){this.props.childrenDidUpdate&&this.props.childrenDidUpdate(this.state.children),this.checkDuplicateChildrenName()}componentDidUpdate(){this.props.childrenDidUpdate&&this.props.childrenDidUpdate(this.state.children),this.checkDuplicateChildrenName()}get length(){return this.state.children.length}exportSchema(){var e;if(null===(e=this.state.hint)||void 0===e?void 0:e.error)throw new Error(this.state.hint.error);return this.state.children.map(e=>{const t=e.ref.current;return{name:t.getField().name,value:t.exportSchema(),required:t.getField().required}})}add(e,t){const i=this.state.children;let a,n={type:v.Object,isDeleteable:!0,hasSibling:!0,isRequiredFieldReadonly:!1,isNameFieldReadonly:!1};t&&(n=Object(b.a)(Object(b.a)({},n),t)),a=void 0===e||""===e?i.length+1:i.findIndex(t=>t.selfId===e),i.splice(a+1,0,Object(b.a)(Object(b.a)({selfId:f.next("child").toString()},n),{},{ref:r.a.createRef()})),this.setState({children:i})}delete(e){const t=this.state.children,i=t.findIndex(t=>t.selfId===e);t.splice(i,1),this.setState({children:t})}checkDuplicateChildrenName(){this.findNameDuplicate()?this.updateHint("error","Find duplicated field name."):this.updateHint("error")}changeType(e,t){this.setState(i=>({children:i.children.map(i=>i.selfId===e?Object(b.a)(Object(b.a)({},i),{},{selfId:f.next("child").toString(),type:t}):i)}))}findNameDuplicate(){if(this.props.isNameUnique){const e=this.state.children.map(e=>e.ref.current.schema.getCurrentField().name);return new Set(e).size!==e.length}return!1}updateHint(e,t){void 0===t?this.state.hint&&this.state.hint[e]&&this.setState(i=>({hint:Object(b.a)(Object(b.a)({},i.hint),{},{[e]:t})})):this.state.hint&&this.state.hint[e]||this.setState(i=>({hint:Object(b.a)(Object(b.a)({},i.hint),{},{[e]:t})}))}render(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(H,{hint:this.state.hint}),this.state.children.map(e=>r.a.createElement(ye,Object.assign({key:e.selfId,depth:this.props.depth+1},e,{delete:this.delete.bind(this,e.selfId),addSibling:this.add.bind(this,e.selfId),changeType:this.changeType.bind(this,e.selfId),changeName:this.checkDuplicateChildrenName.bind(this)}))))}}var Q=_;class X extends r.a.Component{constructor(...e){super(...e),this.optionsButtonsAttr=void 0,this.genericFieldOptions=void 0,this.schema=void 0,this.optionModalRef=void 0,this.genericFieldRef=void 0,this.childrenRef=void 0}addChild(){this.childrenRef&&this.childrenRef.current&&this.childrenRef.current.add()}addSibling(){this.props.addSibling&&this.props.addSibling()}delete(){this.props.delete&&this.props.delete()}getField(){return this.schema.getCurrentField()}recordField(e,t){const i=this.schema.recordField(e,t);this.setState({currentField:i})}showOptionModal(){this.optionModalRef&&this.optionModalRef.current&&this.optionModalRef.current.setDisplayOptionModal(!0)}clearOptionField(){const e=this.schema.clearOptionField();this.setState({currentField:e})}resetOptionField(){const e=this.schema.resetOptionField();this.setState({currentField:e})}updateHint(e,t){this.setState(i=>({hint:Object(b.a)(Object(b.a)({},i.hint),{},{[e]:t})}))}}var Y=X;var Z,ee=class extends Y{constructor(e){super(e),this.optionsButtonsAttr=void 0,this.genericFieldOptions=void 0,this.schema=void 0,this.optionModalRef=void 0,this.genericFieldRef=void 0,this.childrenRef=void 0,this.childrenLength=void 0,this.optionModalRef=r.a.createRef(),this.genericFieldRef=r.a.createRef(),this.childrenRef=r.a.createRef(),this.schema=new R(e.schema,e.field),this.optionsButtonsAttr=Object(b.a)({hasChild:!0,hasSibling:!0,isDeleteable:!0,isOptionExist:!0},e),this.genericFieldOptions=Object(b.a)({},e),this.childrenLength=0,this.state={currentField:this.schema.getDefaultField()}}componentDidMount(){this.props.schema||this.addChild(),this.state.currentField.maxItems<this.state.currentField.minItems&&this.updateHint("warn","minItems > maxItems")}componentDidUpdate(e,t){(t.currentField.maxItems===this.state.currentField.maxItems||isNaN(t.currentField.maxItems)&&isNaN(this.state.currentField.maxItems))&&(t.currentField.minItems===this.state.currentField.minItems||isNaN(t.currentField.minItems)&&isNaN(this.state.currentField.minItems))||(this.state.currentField.maxItems<this.state.currentField.minItems?this.updateHint("warn","minItems > maxItems"):this.updateHint("warn",void 0))}childrenDidUpdate(e){this.childrenLength!==e.length&&(e.length>1?this.updateHint("info","Ordinal index of each item under Array type is meaningful."):this.updateHint("info"),this.childrenLength=e.length)}addChild(){this.childrenRef.current.add("",{type:v.Object,isDeleteable:!0,hasSibling:!0,isRequiredFieldReadonly:!0,isNameFieldReadonly:!0,field:{name:"items",required:!0}})}exportSchema(){return this.schema.exportSchema(this.childrenRef.current.exportSchema())}render(){return r.a.createElement("div",{className:"my-1"},r.a.createElement(x.a,null,r.a.createElement(z,{depth:this.props.depth}),r.a.createElement(N.a,null,r.a.createElement(H,{hint:this.state.hint}),r.a.createElement(S.a,null,r.a.createElement(S.a.Row,null,r.a.createElement(N.a,{lg:11},r.a.createElement(A,{ref:this.genericFieldRef,schemaType:this.schema,options:this.genericFieldOptions,changeType:this.props.changeType,changeName:this.props.changeName})),r.a.createElement(N.a,{lg:1},r.a.createElement(J,{buttonOptions:this.optionsButtonsAttr,delete:this.delete.bind(this),addChild:this.addChild.bind(this),addSibling:this.addSibling.bind(this),showOptionModal:this.showOptionModal.bind(this,!0)})),r.a.createElement(I,{clearOptionFieldForm:this.clearOptionField.bind(this),resetOptionFiledForm:this.resetOptionField.bind(this),ref:this.optionModalRef},r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{as:x.a},r.a.createElement(S.a.Label,{column:!0,lg:"2",htmlFor:"MinItems"},"Min Items"),r.a.createElement(N.a,{lg:"4"},r.a.createElement(S.a.Control,{type:"number",min:"0",id:"MinItems",value:this.state.currentField.minItems,onChange:this.recordField.bind(this,"minItems")})),r.a.createElement(S.a.Label,{column:!0,lg:"2",htmlFor:"MaxItems"},"Max Items"),r.a.createElement(N.a,{lg:"4"},r.a.createElement(S.a.Control,{type:"number",min:"0",id:"MaxItems",value:this.state.currentField.maxItems,onChange:this.recordField.bind(this,"maxItems")}))),r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Check,{type:"checkbox",id:"uniqueCheckbox"},r.a.createElement(S.a.Check.Input,{type:"checkbox",checked:this.state.currentField.uniqueItems,onChange:this.recordField.bind(this,"uniqueItems")}),r.a.createElement(S.a.Check.Label,null,"Unique Items"))))))))),r.a.createElement(Q,{ref:this.childrenRef,depth:this.props.depth,isNameUnique:!1,childrenProperty:this.schema.childrenProperty,childrenDidUpdate:this.childrenDidUpdate.bind(this)}))}};var te=(Z=class extends M{constructor(e,t){super(),this.type=v.Boolean,this.currentField=void 0,this.defaultField=void 0;const i=this.getGenericFieldFromSchema(e,t);this.defaultField=Object(b.a)(Object(b.a)({},i),{},{default:this.retrieveDefaultOptionValue("default",void 0,e)}),this.currentField=Object(b.a)({},this.defaultField)}isSelectElement(e){return void 0!==e.target.selectedIndex}recordField(e,t){return this.isSelectElement(t)&&"default"===e?this.currentField[e]="true"===t.target.value.toLowerCase():this.isSelectElement(t)||M.prototype.recordField.call(this,e,t),this.currentField}resetOptionField(){return this.currentField.default=this.defaultField.default,this.currentField}clearOptionField(){return this.currentField.default=void 0,this.currentField}exportSchema(){const e=v.Boolean,t=this.getGenericSchemaFromField(this.currentField),i=this.exportSchemaWithoutUndefined("default",void 0);return Object(b.a)(Object(b.a)({type:e},t),i)}},Object(j.a)(Z.prototype,"recordField",[O],Object.getOwnPropertyDescriptor(Z.prototype,"recordField"),Z.prototype),Object(j.a)(Z.prototype,"resetOptionField",[O],Object.getOwnPropertyDescriptor(Z.prototype,"resetOptionField"),Z.prototype),Object(j.a)(Z.prototype,"clearOptionField",[O],Object.getOwnPropertyDescriptor(Z.prototype,"clearOptionField"),Z.prototype),Z);var ie,ae=class extends Y{constructor(e){super(e),this.optionsButtonsAttr=void 0,this.genericFieldOptions=void 0,this.schema=void 0,this.optionModalRef=void 0,this.genericFieldRef=void 0,this.optionModalRef=r.a.createRef(),this.genericFieldRef=r.a.createRef(),this.schema=new te(e.schema,e.field),this.optionsButtonsAttr=Object(b.a)({hasChild:!1,hasSibling:!0,isDeleteable:!0,isOptionExist:!0},e),this.genericFieldOptions=Object(b.a)({},e),this.state={currentField:this.schema.getDefaultField()}}exportSchema(){return this.schema.exportSchema()}render(){return r.a.createElement("div",{className:"my-1"},r.a.createElement(x.a,null,r.a.createElement(z,{depth:this.props.depth}),r.a.createElement(N.a,null,r.a.createElement(H,{hint:this.state.hint}),r.a.createElement(S.a,null,r.a.createElement(S.a.Row,null,r.a.createElement(N.a,{lg:11},r.a.createElement(A,{ref:this.genericFieldRef,schemaType:this.schema,options:this.genericFieldOptions,changeType:this.props.changeType,changeName:this.props.changeName})),r.a.createElement(N.a,{lg:1},r.a.createElement(J,{buttonOptions:this.optionsButtonsAttr,delete:this.delete.bind(this),addChild:this.addChild.bind(this),addSibling:this.addSibling.bind(this),showOptionModal:this.showOptionModal.bind(this,!0)})),r.a.createElement(I,{clearOptionFieldForm:this.clearOptionField.bind(this),resetOptionFiledForm:this.resetOptionField.bind(this),ref:this.optionModalRef},r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{as:x.a},r.a.createElement(S.a.Label,{column:!0,lg:"auto",htmlFor:"default"},"Default"),r.a.createElement(N.a,{lg:4},r.a.createElement(S.a.Control,{as:"select",custom:!0,onChange:this.recordField.bind(this,"default"),value:void 0===this.state.currentField.default?"undefined":this.state.currentField.default.toString()},r.a.createElement("option",{disabled:!0,hidden:!0,selected:void 0===this.state.currentField.default,value:"undefined"}," "),r.a.createElement("option",{value:"true"},"True"),r.a.createElement("option",{value:"false"},"False")))))))))))}};var re=(ie=class extends M{constructor(e,t){super(),this.type=v.Integer,this.currentField=void 0,this.defaultField=void 0;const i=this.getGenericFieldFromSchema(e,t);let a,r,n,l;e?(e.minimum?(a=e.minimum,n=!1):e.exclusiveMinimum?(a=e.exclusiveMinimum,n=!0):(a=NaN,n=!1),e.maximum?(r=e.maximum,l=!1):e.exclusiveMaximum?(r=e.exclusiveMaximum,l=!0):(r=NaN,l=!1)):(a=r=NaN,n=l=!1),this.defaultField=Object(b.a)(Object(b.a)({},i),{},{default:this.retrieveDefaultOptionValue("default",NaN,e),const:this.retrieveDefaultOptionValue("const",NaN,e),enum:this.retrieveDefaultOptionValue("enum",[],e),multipleOf:this.retrieveDefaultOptionValue("multipleOf",NaN,e),minimum:a,maximum:r,exclusiveMinimum:n,exclusiveMaximum:l}),this.currentField=Object(b.a)(Object(b.a)({},this.defaultField),{},{enum:[...this.defaultField.enum]})}addEnum(){this.currentField.enum.push(NaN)}updateEnum(e,t){this.currentField.enum[e]=parseInt(t.target.value)}deleteEnum(e){this.currentField.enum.splice(e,1)}resetOptionField(){return this.currentField.default=this.defaultField.default,this.currentField.const=this.defaultField.const,this.currentField.enum=[...this.defaultField.enum],this.currentField.minimum=this.defaultField.minimum,this.currentField.maximum=this.defaultField.maximum,this.currentField.exclusiveMinimum=this.defaultField.exclusiveMinimum,this.currentField.exclusiveMaximum=this.defaultField.exclusiveMaximum,this.currentField.multipleOf=this.defaultField.multipleOf,this.currentField}clearOptionField(){return this.currentField.default=NaN,this.currentField.const=NaN,this.currentField.enum=[],this.currentField.minimum=NaN,this.currentField.maximum=NaN,this.currentField.exclusiveMinimum=!1,this.currentField.exclusiveMaximum=!1,this.currentField.multipleOf=NaN,this.currentField}exportSchema(){const e=v.Integer,t=this.getGenericSchemaFromField(this.currentField),i=this.currentField.enum.filter(e=>!isNaN(e)),a=i.length>0?{enum:i}:{},r=this.exportSchemaWithoutUndefined("default",NaN),n=this.exportSchemaWithoutUndefined("const",NaN),l=this.exportSchemaWithoutUndefined("multipleOf",NaN);let s={},o={};return isNaN(this.currentField.minimum)||(s=this.currentField.exclusiveMinimum?{exclusiveMinimum:this.currentField.minimum}:{minimum:this.currentField.minimum}),isNaN(this.currentField.maximum)||(o=this.currentField.exclusiveMaximum?{exclusiveMaximum:this.currentField.maximum}:{maximum:this.currentField.maximum}),Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({type:e},t),s),o),r),n),l),a)}},Object(j.a)(ie.prototype,"resetOptionField",[O],Object.getOwnPropertyDescriptor(ie.prototype,"resetOptionField"),ie.prototype),Object(j.a)(ie.prototype,"clearOptionField",[O],Object.getOwnPropertyDescriptor(ie.prototype,"clearOptionField"),ie.prototype),ie);class ne extends r.a.Component{render(){return r.a.createElement(S.a.Group,null,this.props.value.length>0?this.props.value.map((e,t)=>r.a.createElement(S.a.Group,{as:x.a,key:t},r.a.createElement(S.a.Label,{column:!0,lg:"2"},0===t?"Enum":""),r.a.createElement(N.a,{lg:this.props.width},t===this.props.value.length-1?r.a.createElement(k.a,null,r.a.createElement(T.a,{type:this.props.type,id:t.toString(),onChange:this.props.update.bind(this,t),value:e}),r.a.createElement(k.a.Append,null,r.a.createElement(F.a,{variant:"outline-danger",onClick:this.props.delete.bind(this,t)},r.a.createElement(K.a,null))),r.a.createElement(k.a.Append,null,r.a.createElement(F.a,{variant:"outline-success",onClick:this.props.add},r.a.createElement(K.b,null)))):r.a.createElement(k.a,null,r.a.createElement(T.a,{type:this.props.type,id:t.toString(),onChange:this.props.update.bind(this,t),value:e}),r.a.createElement(k.a.Append,null,r.a.createElement(F.a,{variant:"outline-danger",onClick:this.props.delete.bind(this,t)},r.a.createElement(K.a,null))))))):r.a.createElement(S.a.Group,{as:x.a},r.a.createElement(S.a.Label,{column:!0,lg:"2"},"Enum"),r.a.createElement(N.a,{lg:"10"},r.a.createElement(x.a,null,r.a.createElement(N.a,{lg:"12"},r.a.createElement(F.a,{variant:"outline-success",onClick:this.props.add.bind(this)},r.a.createElement(K.b,{color:"green"})))))))}}var le=ne;var se,oe=class extends Y{constructor(e){super(e),this.optionsButtonsAttr=void 0,this.genericFieldOptions=void 0,this.schema=void 0,this.optionModalRef=void 0,this.genericFieldRef=void 0,this.optionModalRef=r.a.createRef(),this.genericFieldRef=r.a.createRef(),this.schema=new re(e.schema,e.field),this.optionsButtonsAttr=Object(b.a)({hasChild:!1,hasSibling:!0,isDeleteable:!0,isOptionExist:!0},e),this.genericFieldOptions=Object(b.a)({},e),this.state={currentField:this.schema.getDefaultField()}}componentDidMount(){this.state.currentField.minimum>this.state.currentField.maximum&&this.updateHint("warn","Min Value > Max Value")}componentDidUpdate(e,t){(t.currentField.minimum===this.state.currentField.minimum||isNaN(t.currentField.minimum)&&isNaN(this.state.currentField.minimum))&&(t.currentField.maximum===this.state.currentField.maximum||isNaN(t.currentField.maximum)&&isNaN(this.state.currentField.maximum))||(this.state.currentField.maximum<this.state.currentField.minimum?this.updateHint("warn","Min Value > Max Value"):this.updateHint("warn",void 0))}exportSchema(){return this.schema.exportSchema()}updateEnum(e,t){void 0===e&&void 0===t?this.schema.addEnum():void 0!==e&&void 0===t?this.schema.deleteEnum(e):void 0!==e&&void 0!==t&&this.schema.updateEnum(e,t),this.setState({currentField:this.schema.getCurrentField()})}render(){return r.a.createElement("div",{className:"my-1"},r.a.createElement(x.a,null,r.a.createElement(z,{depth:this.props.depth}),r.a.createElement(N.a,null,r.a.createElement(H,{hint:this.state.hint}),r.a.createElement(S.a,null,r.a.createElement(S.a.Row,null,r.a.createElement(N.a,{lg:11},r.a.createElement(A,{ref:this.genericFieldRef,schemaType:this.schema,options:this.genericFieldOptions,changeType:this.props.changeType,changeName:this.props.changeName})),r.a.createElement(N.a,{lg:1},r.a.createElement(J,{buttonOptions:this.optionsButtonsAttr,delete:this.delete.bind(this),addChild:this.addChild.bind(this),addSibling:this.addSibling.bind(this),showOptionModal:this.showOptionModal.bind(this,!0)})),r.a.createElement(I,{clearOptionFieldForm:this.clearOptionField.bind(this),resetOptionFiledForm:this.resetOptionField.bind(this),ref:this.optionModalRef},r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{as:x.a,controlId:"MinValue"},r.a.createElement(S.a.Label,{column:!0,lg:"2"},"Min Value"),r.a.createElement(N.a,{lg:"4"},r.a.createElement(S.a.Control,{type:"number",value:this.state.currentField.minimum,onChange:this.recordField.bind(this,"minimum")})),r.a.createElement(N.a,{lg:"6"},r.a.createElement(S.a.Check,{id:"ExclusiveMin",inline:!0,onChange:this.recordField.bind(this,"exclusiveMinimum"),checked:!!this.state.currentField.exclusiveMinimum,label:"Exclusive",type:"checkbox",style:{height:"100%"}}))),r.a.createElement(S.a.Group,{as:x.a,controlId:"MaxValue"},r.a.createElement(S.a.Label,{column:!0,lg:"2"},"Max Value"),r.a.createElement(N.a,{lg:"4"},r.a.createElement(S.a.Control,{type:"number",value:this.state.currentField.maximum,onChange:this.recordField.bind(this,"maximum")})),r.a.createElement(N.a,{lg:"6"},r.a.createElement(S.a.Check,{id:"ExclusiveMax",inline:!0,onChange:this.recordField.bind(this,"exclusiveMaximum"),checked:!!this.state.currentField.exclusiveMaximum,label:"Exclusive",type:"checkbox",style:{height:"100%"}}))),r.a.createElement(S.a.Group,{as:x.a},r.a.createElement(S.a.Label,{column:!0,lg:"2",htmlFor:"Default"},"Default"),r.a.createElement(N.a,{lg:"4"},r.a.createElement(S.a.Control,{type:"number",id:"Default",value:this.state.currentField.default,onChange:this.recordField.bind(this,"default")})),r.a.createElement(S.a.Label,{column:!0,lg:"2",htmlFor:"MultipleOf"},"Multiple Of"),r.a.createElement(N.a,{lg:"4"},r.a.createElement(S.a.Control,{type:"number",id:"MultipleOf",value:this.state.currentField.multipleOf,onChange:this.recordField.bind(this,"multipleOf")}))),r.a.createElement(S.a.Group,{as:x.a},r.a.createElement(S.a.Label,{column:!0,lg:"2",htmlFor:"const"},"Constant"),r.a.createElement(N.a,{lg:"4"},r.a.createElement(S.a.Control,{type:"number",id:"const",placeholder:"Restricted Value",value:this.state.currentField.const,onChange:this.recordField.bind(this,"const")}))),r.a.createElement(le,{width:4,type:"number",value:this.state.currentField.enum,add:()=>this.updateEnum(),update:this.updateEnum.bind(this),delete:e=>this.updateEnum(e)}))))))))}};var ce=(se=class extends M{constructor(e,t){super(),this.type=v.Null,this.currentField=void 0,this.defaultField=void 0;const i=this.getGenericFieldFromSchema(e,t);this.defaultField=Object(b.a)({},i),this.currentField=Object(b.a)({},this.defaultField)}resetOptionField(){return this.currentField}clearOptionField(){return this.currentField}exportSchema(){const e=v.Null,t=this.getGenericSchemaFromField(this.currentField);return Object(b.a)({type:e},t)}},Object(j.a)(se.prototype,"resetOptionField",[O],Object.getOwnPropertyDescriptor(se.prototype,"resetOptionField"),se.prototype),Object(j.a)(se.prototype,"clearOptionField",[O],Object.getOwnPropertyDescriptor(se.prototype,"clearOptionField"),se.prototype),se);var de,he=class extends Y{constructor(e){super(e),this.optionsButtonsAttr=void 0,this.genericFieldOptions=void 0,this.schema=void 0,this.genericFieldRef=void 0,this.genericFieldRef=r.a.createRef(),this.schema=new ce(e.schema,e.field),this.optionsButtonsAttr=Object(b.a)({hasChild:!1,hasSibling:!0,isDeleteable:!0,isOptionExist:!1},e),this.genericFieldOptions=Object(b.a)({},e),this.state={currentField:this.schema.getDefaultField()}}exportSchema(){return this.schema.exportSchema()}render(){return r.a.createElement("div",{className:"my-1"},r.a.createElement(x.a,null,r.a.createElement(z,{depth:this.props.depth}),r.a.createElement(N.a,null,r.a.createElement(H,{hint:this.state.hint}),r.a.createElement(S.a,null,r.a.createElement(S.a.Row,null,r.a.createElement(N.a,{lg:11},r.a.createElement(A,{ref:this.genericFieldRef,schemaType:this.schema,options:this.genericFieldOptions,changeType:this.props.changeType,changeName:this.props.changeName})),r.a.createElement(N.a,{lg:1},r.a.createElement(J,{buttonOptions:this.optionsButtonsAttr,delete:this.delete.bind(this),addChild:this.addChild.bind(this),addSibling:this.addSibling.bind(this),showOptionModal:this.showOptionModal.bind(this,!0)})))))))}};var me=(de=class extends M{constructor(e,t){super(),this.type=v.Number,this.currentField=void 0,this.defaultField=void 0;const i=this.getGenericFieldFromSchema(e,t);let a,r,n,l;e?(e.minimum?(a=e.minimum,n=!1):e.exclusiveMinimum?(a=e.exclusiveMinimum,n=!0):(a=NaN,n=!1),e.maximum?(r=e.maximum,l=!1):e.exclusiveMaximum?(r=e.exclusiveMaximum,l=!0):(r=NaN,l=!1)):(a=r=NaN,n=l=!1),this.defaultField=Object(b.a)(Object(b.a)({},i),{},{default:this.retrieveDefaultOptionValue("default",NaN,e),const:this.retrieveDefaultOptionValue("const",NaN,e),enum:this.retrieveDefaultOptionValue("enum",[],e),multipleOf:this.retrieveDefaultOptionValue("multipleOf",NaN,e),minimum:a,maximum:r,exclusiveMinimum:n,exclusiveMaximum:l}),this.currentField=Object(b.a)(Object(b.a)({},this.defaultField),{},{enum:[...this.defaultField.enum]})}recordField(e,t){return"$comment"===e||"description"===e||"name"===e||"title"===e?this.currentField[e]=t.target.value:"const"===e||"default"===e||"maximum"===e||"minimum"===e||"multipleOf"===e?this.currentField[e]=parseFloat(t.target.value):"exclusiveMaximum"!==e&&"exclusiveMinimum"!==e&&"required"!==e||(this.currentField[e]=t.target.checked),this.currentField}addEnum(){this.currentField.enum.push(NaN)}updateEnum(e,t){this.currentField.enum[e]=parseFloat(t.target.value)}deleteEnum(e){this.currentField.enum.splice(e,1)}resetOptionField(){return this.currentField.default=this.defaultField.default,this.currentField.const=this.defaultField.const,this.currentField.enum=[...this.defaultField.enum],this.currentField.minimum=this.defaultField.minimum,this.currentField.maximum=this.defaultField.maximum,this.currentField.exclusiveMinimum=this.defaultField.exclusiveMinimum,this.currentField.exclusiveMaximum=this.defaultField.exclusiveMaximum,this.currentField.multipleOf=this.defaultField.multipleOf,this.currentField}clearOptionField(){return this.currentField.default=NaN,this.currentField.const=NaN,this.currentField.enum=[],this.currentField.minimum=NaN,this.currentField.maximum=NaN,this.currentField.exclusiveMinimum=!1,this.currentField.exclusiveMaximum=!1,this.currentField.multipleOf=NaN,this.currentField}exportSchema(){const e=v.Number,t=this.getGenericSchemaFromField(this.currentField),i=this.currentField.enum.filter(e=>!isNaN(e)),a=i.length>0?{enum:i}:{},r=this.exportSchemaWithoutUndefined("default",NaN),n=this.exportSchemaWithoutUndefined("const",NaN),l=this.exportSchemaWithoutUndefined("multipleOf",NaN);let s={},o={};return isNaN(this.currentField.minimum)||(s=this.currentField.exclusiveMinimum?{exclusiveMinimum:this.currentField.minimum}:{minimum:this.currentField.minimum}),isNaN(this.currentField.maximum)||(o=this.currentField.exclusiveMaximum?{exclusiveMaximum:this.currentField.maximum}:{maximum:this.currentField.maximum}),Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({type:e},t),s),o),r),n),l),a)}},Object(j.a)(de.prototype,"recordField",[O],Object.getOwnPropertyDescriptor(de.prototype,"recordField"),de.prototype),Object(j.a)(de.prototype,"resetOptionField",[O],Object.getOwnPropertyDescriptor(de.prototype,"resetOptionField"),de.prototype),Object(j.a)(de.prototype,"clearOptionField",[O],Object.getOwnPropertyDescriptor(de.prototype,"clearOptionField"),de.prototype),de);var ue,pe=class extends Y{constructor(e){super(e),this.optionsButtonsAttr=void 0,this.genericFieldOptions=void 0,this.schema=void 0,this.optionModalRef=void 0,this.genericFieldRef=void 0,this.optionModalRef=r.a.createRef(),this.genericFieldRef=r.a.createRef(),this.schema=new me(e.schema,e.field),this.optionsButtonsAttr=Object(b.a)({hasChild:!1,hasSibling:!0,isDeleteable:!0,isOptionExist:!0},e),this.genericFieldOptions=Object(b.a)({},e),this.state={currentField:this.schema.getDefaultField()}}componentDidMount(){this.state.currentField.minimum>this.state.currentField.maximum&&this.updateHint("warn","Min Value > Max Value")}componentDidUpdate(e,t){(t.currentField.minimum===this.state.currentField.minimum||isNaN(t.currentField.minimum)&&isNaN(this.state.currentField.minimum))&&(t.currentField.maximum===this.state.currentField.maximum||isNaN(t.currentField.maximum)&&isNaN(this.state.currentField.maximum))||(this.state.currentField.maximum<this.state.currentField.minimum?this.updateHint("warn","Min Value > Max Value"):this.updateHint("warn",void 0))}exportSchema(){return this.schema.exportSchema()}updateEnum(e,t){void 0===e&&void 0===t?this.schema.addEnum():void 0!==e&&void 0===t?this.schema.deleteEnum(e):void 0!==e&&void 0!==t&&this.schema.updateEnum(e,t),this.setState({currentField:this.schema.getCurrentField()})}render(){return r.a.createElement("div",{className:"my-1"},r.a.createElement(x.a,null,r.a.createElement(z,{depth:this.props.depth}),r.a.createElement(N.a,null,r.a.createElement(H,{hint:this.state.hint}),r.a.createElement(S.a,null,r.a.createElement(S.a.Row,null,r.a.createElement(N.a,{lg:11},r.a.createElement(A,{ref:this.genericFieldRef,schemaType:this.schema,options:this.genericFieldOptions,changeType:this.props.changeType,changeName:this.props.changeName})),r.a.createElement(N.a,{lg:1},r.a.createElement(J,{buttonOptions:this.optionsButtonsAttr,delete:this.delete.bind(this),addChild:this.addChild.bind(this),addSibling:this.addSibling.bind(this),showOptionModal:this.showOptionModal.bind(this,!0)})),r.a.createElement(I,{clearOptionFieldForm:this.clearOptionField.bind(this),resetOptionFiledForm:this.resetOptionField.bind(this),ref:this.optionModalRef},r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{as:x.a,controlId:"MinValue"},r.a.createElement(S.a.Label,{column:!0,lg:"2"},"Min Value"),r.a.createElement(N.a,{lg:"4"},r.a.createElement(S.a.Control,{type:"number",value:this.state.currentField.minimum,onChange:this.recordField.bind(this,"minimum")})),r.a.createElement(N.a,{lg:"6"},r.a.createElement(S.a.Check,{id:"ExclusiveMin",inline:!0,onChange:this.recordField.bind(this,"exclusiveMinimum"),checked:!!this.state.currentField.exclusiveMinimum,label:"Exclusive",type:"checkbox",style:{height:"100%"}}))),r.a.createElement(S.a.Group,{as:x.a,controlId:"MaxValue"},r.a.createElement(S.a.Label,{column:!0,lg:"2"},"Max Value"),r.a.createElement(N.a,{lg:"4"},r.a.createElement(S.a.Control,{type:"number",value:this.state.currentField.maximum,onChange:this.recordField.bind(this,"maximum")})),r.a.createElement(N.a,{lg:"6"},r.a.createElement(S.a.Check,{id:"ExclusiveMax",inline:!0,onChange:this.recordField.bind(this,"exclusiveMaximum"),checked:!!this.state.currentField.exclusiveMaximum,label:"Exclusive",type:"checkbox",style:{height:"100%"}}))),r.a.createElement(S.a.Group,{as:x.a},r.a.createElement(S.a.Label,{column:!0,lg:"2",htmlFor:"Default"},"Default"),r.a.createElement(N.a,{lg:"4"},r.a.createElement(S.a.Control,{type:"number",id:"Default",value:this.state.currentField.default,onChange:this.recordField.bind(this,"default")})),r.a.createElement(S.a.Label,{column:!0,lg:"2",htmlFor:"MultipleOf"},"Multiple Of"),r.a.createElement(N.a,{lg:"4"},r.a.createElement(S.a.Control,{type:"number",id:"MultipleOf",value:this.state.currentField.multipleOf,onChange:this.recordField.bind(this,"multipleOf")}))),r.a.createElement(S.a.Group,{as:x.a},r.a.createElement(S.a.Label,{column:!0,lg:"2",htmlFor:"const"},"Constant"),r.a.createElement(N.a,{lg:"4"},r.a.createElement(S.a.Control,{type:"number",id:"const",placeholder:"Restricted Value",value:this.state.currentField.const,onChange:this.recordField.bind(this,"const")}))),r.a.createElement(le,{type:"number",width:4,value:this.state.currentField.enum,add:()=>this.updateEnum(),update:this.updateEnum.bind(this),delete:e=>this.updateEnum(e)}))))))))}},Fe=i(79);var ge=(ue=class extends M{constructor(e,t){super(),this.type=v.Object,this.currentField=void 0,this.defaultField=void 0,this.childrenProperty=void 0;const i=this.getGenericFieldFromSchema(e,t);this.defaultField=Object(b.a)(Object(b.a)({},i),{},{maxProperties:this.retrieveDefaultOptionValue("maxProperties",NaN,e),minProperties:this.retrieveDefaultOptionValue("minProperties",NaN,e)}),this.currentField=Object(b.a)({},this.defaultField),e&&(this.childrenProperty=this.generateChildrenPropertyFromSchema(e))}generateChildrenPropertyFromSchema(e){return Object.keys(e.properties).map(t=>({type:e.properties[t].type,selfId:f.next("child").toString(),hasSibling:!0,isDeleteable:!0,isRequiredFieldReadonly:!1,isNameFieldReadonly:!1,ref:r.a.createRef(),field:{name:t,required:void 0!==e.required.find(e=>e===t)},schema:e.properties[t]}))}resetOptionField(){return this.currentField.maxProperties=this.defaultField.maxProperties,this.currentField.minProperties=this.defaultField.minProperties,this.currentField}clearOptionField(){return this.currentField.maxProperties=NaN,this.currentField.minProperties=NaN,this.currentField}exportSchema(e){const t=v.Object,i=this.getGenericSchemaFromField(this.currentField),a=this.exportSchemaWithoutUndefined("maxProperties",NaN),r=this.exportSchemaWithoutUndefined("minProperties",NaN),n=[],l={};if(e){var s,o=Object(Fe.a)(e);try{for(o.s();!(s=o.n()).done;){const e=s.value;l[e.name]=e.value,e.required&&n.push(e.name)}}catch(c){o.e(c)}finally{o.f()}}return Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({type:t},i),r),a),{},{required:n,properties:l})}},Object(j.a)(ue.prototype,"resetOptionField",[O],Object.getOwnPropertyDescriptor(ue.prototype,"resetOptionField"),ue.prototype),Object(j.a)(ue.prototype,"clearOptionField",[O],Object.getOwnPropertyDescriptor(ue.prototype,"clearOptionField"),ue.prototype),ue);var be,fe=class extends Y{constructor(e){super(e),this.optionsButtonsAttr=void 0,this.genericFieldOptions=void 0,this.schema=void 0,this.optionModalRef=void 0,this.genericFieldRef=void 0,this.childrenRef=void 0,this.optionModalRef=r.a.createRef(),this.genericFieldRef=r.a.createRef(),this.childrenRef=r.a.createRef(),this.schema=new ge(e.schema,e.field),this.optionsButtonsAttr=Object(b.a)({hasChild:!0,hasSibling:!0,isDeleteable:!0,isOptionExist:!0},e),this.genericFieldOptions=Object(b.a)({},e),this.state={currentField:this.schema.getDefaultField()}}componentDidMount(){this.state.currentField.maxProperties<this.state.currentField.minProperties&&this.updateHint("warn","minProperties > maxProperties")}componentDidUpdate(e,t){(t.currentField.maxProperties===this.state.currentField.maxProperties||isNaN(t.currentField.maxProperties)&&isNaN(this.state.currentField.maxProperties))&&(t.currentField.minProperties===this.state.currentField.minProperties||isNaN(t.currentField.minProperties)&&isNaN(this.state.currentField.minProperties))||(this.state.currentField.maxProperties<this.state.currentField.minProperties?this.updateHint("warn","minProperties > maxProperties"):this.updateHint("warn"))}exportSchema(){return this.schema.exportSchema(this.childrenRef.current.exportSchema())}render(){return r.a.createElement("div",{className:"my-1"},r.a.createElement(x.a,null,r.a.createElement(z,{depth:this.props.depth}),r.a.createElement(N.a,null,r.a.createElement(H,{hint:this.state.hint}),r.a.createElement(S.a,null,r.a.createElement(S.a.Row,null,r.a.createElement(N.a,{lg:11},r.a.createElement(A,{ref:this.genericFieldRef,schemaType:this.schema,options:this.genericFieldOptions,changeType:this.props.changeType,changeName:this.props.changeName})),r.a.createElement(N.a,{lg:1},r.a.createElement(J,{buttonOptions:this.optionsButtonsAttr,delete:this.delete.bind(this),addChild:this.addChild.bind(this),addSibling:this.addSibling.bind(this),showOptionModal:this.showOptionModal.bind(this,!0)})),r.a.createElement(I,{clearOptionFieldForm:this.clearOptionField.bind(this),resetOptionFiledForm:this.resetOptionField.bind(this),ref:this.optionModalRef},r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{as:x.a},r.a.createElement(S.a.Label,{column:!0,lg:"auto",htmlFor:"MinProperties"},"Min Properties"),r.a.createElement(N.a,null,r.a.createElement(S.a.Control,{type:"number",min:"0",id:"MinProperties",value:this.state.currentField.minProperties,onChange:this.recordField.bind(this,"minProperties")})),r.a.createElement(S.a.Label,{column:!0,lg:"auto",htmlFor:"MaxProperties"},"Max Properties"),r.a.createElement(N.a,null,r.a.createElement(S.a.Control,{type:"number",min:"0",id:"MaxProperties",value:this.state.currentField.maxProperties,onChange:this.recordField.bind(this,"maxProperties")}))))))))),r.a.createElement(Q,{ref:this.childrenRef,depth:this.props.depth,isNameUnique:!0,childrenProperty:this.schema.childrenProperty}))}};var Ee=(be=class extends M{constructor(e,t){super(),this.type=v.String,this.currentField=void 0,this.defaultField=void 0;const i=this.getGenericFieldFromSchema(e,t);this.defaultField=Object(b.a)(Object(b.a)({},i),{},{default:this.retrieveDefaultOptionValue("default","",e),const:this.retrieveDefaultOptionValue("const","",e),enum:this.retrieveDefaultOptionValue("enum",[],e),minLength:this.retrieveDefaultOptionValue("minLength",NaN,e),maxLength:this.retrieveDefaultOptionValue("maxLength",NaN,e),format:this.retrieveDefaultOptionValue("format","",e),pattern:this.retrieveDefaultOptionValue("pattern","",e)}),this.currentField=Object(b.a)(Object(b.a)({},this.defaultField),{},{enum:[...this.defaultField.enum]})}addEnum(){this.currentField.enum.push("")}updateEnum(e,t){this.currentField.enum[e]=t.target.value}deleteEnum(e){this.currentField.enum.splice(e,1)}resetOptionField(){return this.currentField.default=this.defaultField.default,this.currentField.const=this.defaultField.const,this.currentField.enum=[...this.defaultField.enum],this.currentField.minLength=this.defaultField.minLength,this.currentField.maxLength=this.defaultField.maxLength,this.currentField.format=this.defaultField.format,this.currentField.pattern=this.defaultField.pattern,this.currentField}clearOptionField(){return this.currentField.default="",this.currentField.const="",this.currentField.enum=[],this.currentField.minLength=NaN,this.currentField.maxLength=NaN,this.currentField.format="",this.currentField.pattern="",this.currentField}exportSchema(){const e=v.String,t=this.getGenericSchemaFromField(this.currentField),i=this.currentField.enum.filter(e=>""!==e),a=i.length>0?{enum:i}:{},r=this.exportSchemaWithoutUndefined("default",""),n=this.exportSchemaWithoutUndefined("const",""),l=this.exportSchemaWithoutUndefined("minLength",NaN),s=this.exportSchemaWithoutUndefined("maxLength",NaN),o=this.exportSchemaWithoutUndefined("format",""),c=this.exportSchemaWithoutUndefined("pattern","");return Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({type:e},t),r),n),l),s),a),o),c)}},Object(j.a)(be.prototype,"resetOptionField",[O],Object.getOwnPropertyDescriptor(be.prototype,"resetOptionField"),be.prototype),Object(j.a)(be.prototype,"clearOptionField",[O],Object.getOwnPropertyDescriptor(be.prototype,"clearOptionField"),be.prototype),be);var Oe=class extends Y{constructor(e){super(e),this.optionsButtonsAttr=void 0,this.genericFieldOptions=void 0,this.schema=void 0,this.optionModalRef=void 0,this.genericFieldRef=void 0,this.optionModalRef=r.a.createRef(),this.genericFieldRef=r.a.createRef(),this.schema=new Ee(e.schema,e.field),this.optionsButtonsAttr=Object(b.a)({hasChild:!1,hasSibling:!0,isDeleteable:!0,isOptionExist:!0},e),this.genericFieldOptions=Object(b.a)({},e),this.state={currentField:this.schema.getDefaultField()}}componentDidMount(){this.state.currentField.minLength>this.state.currentField.maxLength&&this.updateHint("warn","Min Length > Max Length")}componentDidUpdate(e,t){console.log(t,this.state),(t.currentField.minLength===this.state.currentField.minLength||isNaN(t.currentField.minLength)&&isNaN(this.state.currentField.minLength))&&(t.currentField.maxLength===this.state.currentField.maxLength||isNaN(t.currentField.maxLength)&&isNaN(this.state.currentField.maxLength))||(this.state.currentField.minLength>this.state.currentField.maxLength?this.updateHint("warn","Min Length > Max Length"):this.updateHint("warn",void 0))}exportSchema(){return this.schema.exportSchema()}updateEnum(e,t){void 0===e&&void 0===t?this.schema.addEnum():void 0!==e&&void 0===t?this.schema.deleteEnum(e):void 0!==e&&void 0!==t&&this.schema.updateEnum(e,t),this.setState({currentField:this.schema.getCurrentField()})}render(){return r.a.createElement("div",{className:"my-1"},r.a.createElement(x.a,null,r.a.createElement(z,{depth:this.props.depth}),r.a.createElement(N.a,null,r.a.createElement(H,{hint:this.state.hint}),r.a.createElement(S.a,null,r.a.createElement(S.a.Row,null,r.a.createElement(N.a,{lg:11},r.a.createElement(A,{ref:this.genericFieldRef,schemaType:this.schema,options:this.genericFieldOptions,changeType:this.props.changeType,changeName:this.props.changeName})),r.a.createElement(N.a,{lg:1},r.a.createElement(J,{buttonOptions:this.optionsButtonsAttr,delete:this.delete.bind(this),addChild:this.addChild.bind(this),addSibling:this.addSibling.bind(this),showOptionModal:this.showOptionModal.bind(this,!0)})),r.a.createElement(I,{clearOptionFieldForm:this.clearOptionField.bind(this),resetOptionFiledForm:this.resetOptionField.bind(this),ref:this.optionModalRef},r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{as:x.a},r.a.createElement(S.a.Label,{column:!0,lg:"2",htmlFor:"Default"},"Default"),r.a.createElement(N.a,{lg:"10"},r.a.createElement(S.a.Control,{type:"text",id:"Default",value:this.state.currentField.default,onChange:this.recordField.bind(this,"default")}))),r.a.createElement(S.a.Group,{as:x.a},r.a.createElement(S.a.Label,{column:!0,lg:"2",htmlFor:"MinLength"},"Min Length"),r.a.createElement(N.a,{lg:"4"},r.a.createElement(S.a.Control,{type:"number",min:"0",id:"MinLength",value:this.state.currentField.minLength,onChange:this.recordField.bind(this,"minLength")})),r.a.createElement(S.a.Label,{column:!0,lg:"2",htmlFor:"MaxLength"},"Max Length"),r.a.createElement(N.a,{lg:"4"},r.a.createElement(S.a.Control,{type:"number",min:"0",id:"MaxLength",value:this.state.currentField.maxLength,onChange:this.recordField.bind(this,"maxLength")}))),r.a.createElement(S.a.Group,{as:x.a,controlId:"Format"},r.a.createElement(S.a.Label,{column:!0,lg:"2"},"Format"),r.a.createElement(N.a,{lg:"10"},r.a.createElement(S.a.Control,{as:"select",value:this.state.currentField.format,onChange:this.recordField.bind(this,"format")},r.a.createElement("option",{disabled:!0,hidden:!0,value:""}," "),["date-time","time","date","email","idn-email","hostname","idn-hostname","ipv4","ipv6","uri","uri-reference","iri","iri-reference","uri-template","json-pointer","relative-json-pointer","regex"].map((e,t)=>r.a.createElement("option",{key:t,value:e},e))))),r.a.createElement(S.a.Group,{as:x.a,controlId:"Pattern"},r.a.createElement(S.a.Label,{column:!0,lg:"2"},"Pattern"),r.a.createElement(N.a,{lg:"10"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Regular Expression",value:this.state.currentField.pattern,onChange:this.recordField.bind(this,"pattern")}))),r.a.createElement(S.a.Group,{as:x.a,controlId:"const"},r.a.createElement(S.a.Label,{column:!0,lg:"2"},"Constant"),r.a.createElement(N.a,{lg:"10"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Restricted Value",value:this.state.currentField.const,onChange:this.recordField.bind(this,"const")}))),r.a.createElement(le,{type:"text",width:10,value:this.state.currentField.enum,add:()=>this.updateEnum(),update:this.updateEnum.bind(this),delete:e=>this.updateEnum(e)}))))))))}};const ve=r.a.forwardRef((e,t)=>{switch(e.type){case v.Array:return r.a.createElement(ee,Object.assign({},Object(b.a)(Object(b.a)({},e),{},{field:e.field,schema:e.schema}),{ref:t}));case v.Boolean:return r.a.createElement(ae,Object.assign({},Object(b.a)(Object(b.a)({},e),{},{field:e.field,schema:e.schema}),{ref:t}));case v.Integer:return r.a.createElement(oe,Object.assign({},Object(b.a)(Object(b.a)({},e),{},{field:e.field,schema:e.schema}),{ref:t}));case v.Number:return r.a.createElement(pe,Object.assign({},Object(b.a)(Object(b.a)({},e),{},{field:e.field,schema:e.schema}),{ref:t}));case v.Null:return r.a.createElement(he,Object.assign({},Object(b.a)(Object(b.a)({},e),{},{field:e.field,schema:e.schema}),{ref:t}));case v.Object:return r.a.createElement(fe,Object.assign({},Object(b.a)(Object(b.a)({},e),{},{field:e.field,schema:e.schema}),{ref:t}));case v.String:return r.a.createElement(Oe,Object.assign({},Object(b.a)(Object(b.a)({},e),{},{field:e.field,schema:e.schema}),{ref:t}))}});ve.displayName="SchemaEditorFactory";var ye=ve;class xe extends r.a.Component{constructor(e){super(e),this.editorRef=void 0,this.editorRef=r.a.createRef(),e.schema?this.state={type:e.schema.type}:this.state={type:v.Object}}changeType(e){this.setState({type:e})}changeName(){console.log("[Root Node] Change Name!!")}exportSchema(){return this.editorRef.current.exportSchema()}render(){return r.a.createElement(ye,{ref:this.editorRef,type:this.state.type,schema:this.props.schema,depth:0,field:{name:"root",required:!0},hasSibling:!1,isDeleteable:!1,isRequiredFieldReadonly:!0,isNameFieldReadonly:!0,changeType:this.changeType.bind(this),changeName:this.changeName.bind(this)})}}var Ne=xe;class Se extends r.a.Component{constructor(e){super(e),this.fileUploadRef=void 0,this.editorRef=void 0,this.rootSchemaEditorKey=void 0,this.fileUploadRef=r.a.createRef(),this.editorRef=r.a.createRef(),this.rootSchemaEditorKey=f.next("key").toString(),this.state={}}toggleImport(){this.fileUploadRef.current.click()}import(e){var t=this;return Object(d.a)(c.a.mark((function i(){var a,r,n;return c.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!e.target.files){i.next=16;break}return i.prev=1,i.next=4,e.target.files[0].text();case 4:a=i.sent,r=JSON.parse(a),(n=new m.a({schemaId:"auto"})).addMetaSchema(u),n.addMetaSchema(p),n.validateSchema(r)?(t.rootSchemaEditorKey=f.next("key").toString(),t.setState({schema:r})):t.setState({error:"Parsing Schema Error! We only support draft-04/06/07"}),i.next=16;break;case 13:i.prev=13,i.t0=i.catch(1),t.setState({error:"Parsing Schema Error! Please check your schema."});case 16:case"end":return i.stop()}}),i,null,[[1,13]])})))()}export(){try{const e=this.editorRef.current.exportSchema(),t=new Blob([JSON.stringify(e,null,4)],{type:"application/schema+json"}),i=window.URL.createObjectURL(t),a=document.createElement("a");a.href=i,a.setAttribute("download","Schema.json"),document.body.appendChild(a),a.click(),document.body.removeChild(a)}catch(e){this.setState({error:"Find Error: ".concat(e.message," Please check and export again.")})}}render(){return r.a.createElement("div",{className:"my-3 mx-4 "},r.a.createElement("input",{type:"file",id:"file-uploader","data-target":"file-uploader",hidden:!0,ref:this.fileUploadRef,onChange:this.import.bind(this)}),r.a.createElement(F.a,{variant:"outline-primary",onClick:this.toggleImport.bind(this)},"Import from file")," ",r.a.createElement(F.a,{variant:"outline-success",onClick:this.export.bind(this)},"Export Schema"),r.a.createElement(Ne,{ref:this.editorRef,key:this.rootSchemaEditorKey,schema:this.state.schema}),this.state.error&&r.a.createElement(g.a,{show:!!this.state.error,onClose:()=>{this.setState({error:void 0})},delay:3e3,autohide:!0,style:{position:"absolute",bottom:"20px",right:"20px",borderColor:"red",color:"red"}},r.a.createElement(g.a.Header,{style:{borderColor:"red",color:"red"}},r.a.createElement("strong",{className:"mr-auto"},"Error")),r.a.createElement(g.a.Body,null,this.state.error)))}}var je=Se;class Ce extends r.a.Component{render(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(s.a.Brand,{href:""},"JSON Schema Editor"),r.a.createElement(s.a.Collapse,{className:"justify-content-end"},r.a.createElement(s.a.Text,null,r.a.createElement("a",{href:"https://github.com/JingWangTW/json-schema-editor",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{height:"30px",src:"https://github.com/fluidicon.png",alt:"Github ICON"}))))),r.a.createElement(je,null))}}var Me=Ce;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})},54:function(e,t,i){},80:function(e,t,i){e.exports=i(122)}},[[80,1,2]]]);
//# sourceMappingURL=main.d940b892.chunk.js.map